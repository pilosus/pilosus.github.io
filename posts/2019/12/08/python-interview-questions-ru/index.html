<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>Вопросы и ответы для собеседования веб-разработчика на Python</title>

    <!-- Mobile Specific Metas –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Open Graph Metas –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta property="og:title" content="Вопросы и ответы для собеседования веб-разработчика на Python" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://blog.pilosus.org/theme/images/og_image_default.png" />
    <meta property="og:url" content="https://blog.pilosus.org/posts/2019/12/08/python-interview-questions-ru/" />
    <meta property="og:description" content="Вопросы и ответы для технического собеседования Python-разработчика" />
    <meta property="og:locale" content="" />
    <meta property="og:site_name" content="Vitaly&#39;s Technical Blog" />
    <meta property="article:published_time" content="2019-12-08" />
    <meta property="article:section" content="Blog" />
    <meta property="article:tag" content="python" />
    <meta property="article:tag" content="interview" />
    <meta property="article:tag" content="ru" />


    <!-- FONT –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600&amp;subset=cyrillic" rel="stylesheet" type="text/css">

    <!-- CSS –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="https://blog.pilosus.org/theme/css/normalize.css" />
    <link rel="stylesheet" href="https://blog.pilosus.org/theme/css/skeleton.css" />
    <link rel="stylesheet" href="https://blog.pilosus.org/theme/css/custom.css" />
    <link rel="stylesheet" href="https://blog.pilosus.org/theme/css/pygment.css" />

    <!-- Favicon –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="icon" type="image/png" href="https://blog.pilosus.org/theme/images/favicon.png">

    <!-- Feeds –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href="https://blog.pilosus.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Vitaly's Technical Blog Atom Feed" />
  </head>

  <!-- Primary Page Layout  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <body id="index" class="home">
    <div class="container">

      <section class="header">
	<div class="row">
	  <div class="two columns">
	    <img class="header-img u-full-width" alt="Vitaly Samigullin" src="/images/avatar.png">
	  </div>
	  <div class="ten columns">
	    <h2 class="title"><a class="header-link" href="https://blog.pilosus.org/">Vitaly's Technical Blog </a></h2>
	  </div>
	</div>
      </section>

      <div class="navbar-spacer"></div>
      <nav class="navbar">
	<div class="container">
          <ul class="navbar-list">
	    
            <li class="navbar-item"><a  class="navbar-link" href="https://blog.pilosus.org/pages/contact/">Contact</a></li>
            <li class="navbar-item"><a  class="navbar-link" href="https://blog.pilosus.org/pages/subscribe/">Subscribe</a></li>
            <li class="navbar-item"><a  class="navbar-link hl" href="https://blog.pilosus.org/category/blog/">Blog</a></li>
          </ul>
	</div>
      </nav>

      <div class="search">
        <form id="search-google" name="searchForm" action="https://google.com/search">
          <div class="row">
            <div class="ten columns">
	      <input class="u-full-width" name="q" type="text" placeholder="Keyword..." maxlength="200" />
	      <input name="q" type="hidden" value="site:https://blog.pilosus.org"/>
            </div>
            <div class="two columns">
	      <input class="button u-full-width" name="submit" type="submit" value="Search" />
            </div>
          </div>
        </form>
      </div>
      
      <div class="content">
        <section id="content" class="body">
          <article class="post-entry">
            <header class="post-header">
              <h4 class="post-title">
                <a href="https://blog.pilosus.org/posts/2019/12/08/python-interview-questions-ru/" rel="bookmark"
                   title="Permalink to Вопросы и ответы для собеседования веб-разработчика на Python">Вопросы и ответы для собеседования веб-разработчика на&nbsp;Python</a></h4>
            </header>

            <div class="entry-content">
              <div class="post-info">
                <span class="published" title="2019-12-08T14:57:00+03:00">
                  Вс 08 декабря 2019
                </span>
                |
                <span class="vcard author">
                  by                   <a class="url fn" href="https://blog.pilosus.org/">Vitaly Samigullin</a>
                </span>
                |
                <span>in <a href="https://blog.pilosus.org/category/blog/">Blog</a></span>
		|
		<span class="word-count">3552 words</span>
		|
		<span class="word-count">15 min to read</span>
<br/><span>tags: <a href="https://blog.pilosus.org/tag/python/">python</a> <a href="https://blog.pilosus.org/tag/interview/">interview</a> <a href="https://blog.pilosus.org/tag/ru/">ru</a> </span>                
              </div><!-- /.post-info -->              <p>Ниже вы найдете принципы проведения и вопросы для технического
собеседования на позицию Python-разработчика. Хотя вопросы довольно
универсальны, больше всего они подойдут для области&nbsp;веб-разработки.</p>
<p>Вопросы прошли испытания боем: с их помощью было прособеседовано
больше 35 кандидатов. Из них 3 (2 экс-Яндекс) стали частью моей
команды в 2018 году, и еще 1 кандидат вышел в параллельную&nbsp;команду.</p>
<p>Вопросы получили положительный отклик коллег: люди используют их в
каком-то объеме для собеседований в своих компаниях. Я также
использую эти вопросы для консультации людей, которые готовятся к
прохождению технического&nbsp;собеседования.</p>
<p>В то же время вопросы едва ли можно считать уникальными. Здесь нет
никаких профессиональных тайн. На мой взгляд, основное преимущество
вопросов &#8212; их система и принципы. На их основе можно составлять свои
интересные и полезные вопросы для проведения собеседования, скроенные
для ваших нужд. Или готовиться к техническому интервью в качестве&nbsp;кандидата.</p>
<div class="contents topic" id="id1">
<p class="topic-title first">Содержание</p>
<ul class="simple">
<li><a class="reference internal" href="#id2" id="id36">Введение</a><ul>
<li><a class="reference internal" href="#id3" id="id37">Предпосылки</a></li>
<li><a class="reference internal" href="#id4" id="id38">Отбор&nbsp;кандидатов</a></li>
<li><a class="reference internal" href="#id5" id="id39">Гуманитарные&nbsp;вопросы</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6" id="id40">Python</a><ul>
<li><a class="reference internal" href="#id7" id="id41">Проверка знаний, как развивается&nbsp;язык</a></li>
<li><a class="reference internal" href="#id8" id="id42">Основные типы и структуры данных в&nbsp;Python</a></li>
<li><a class="reference internal" href="#id9" id="id43">Порядок вычисления дефолтных аргументов&nbsp;функций</a></li>
<li><a class="reference internal" href="#id10" id="id44">Что такое&nbsp;декоратор?</a></li>
<li><a class="reference internal" href="#stdout" id="id45">Декоратор, выводящий в stdout время выполнения&nbsp;функции</a></li>
<li><a class="reference internal" href="#id11" id="id46">Применение&nbsp;декоратора</a></li>
<li><a class="reference internal" href="#id12" id="id47">Имя декорированной&nbsp;функции</a></li>
<li><a class="reference internal" href="#id13" id="id48">Декоратор для&nbsp;генераторов</a></li>
<li><a class="reference internal" href="#id14" id="id49">Декоратор с&nbsp;аргументами</a></li>
<li><a class="reference internal" href="#id15" id="id50">Переменные&nbsp;класса</a></li>
<li><a class="reference internal" href="#id16" id="id51">Слайсы в&nbsp;списках</a></li>
<li><a class="reference internal" href="#list-dict-comprehensions" id="id52">Что такое list/dict&nbsp;comprehensions?</a></li>
<li><a class="reference internal" href="#generator-expressions" id="id53">Generator&nbsp;expressions</a></li>
<li><a class="reference internal" href="#functools" id="id54">Какие полезные функции из модуля functools ты&nbsp;знаешь?</a></li>
<li><a class="reference internal" href="#asyncio-multithreading-multiprocessing" id="id55">Asyncio, multithreading,&nbsp;multiprocessing</a></li>
<li><a class="reference internal" href="#id17" id="id56">Экосистема&nbsp;языка</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id18" id="id57">Алгоритмы</a><ul>
<li><a class="reference internal" href="#id19" id="id58">Временная&nbsp;сложность</a></li>
<li><a class="reference internal" href="#lisp" id="id59">Проверка сбалансированности скобок в&nbsp;Lisp-программе</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id20" id="id60">Базы данных</a><ul>
<li><a class="reference internal" href="#rdbms" id="id61">Зачем нужна <span class="caps">RDBMS</span>?</a></li>
<li><a class="reference internal" href="#mysql-postgresql" id="id62">Запросы в&nbsp;MySQL/PostgreSQL</a></li>
<li><a class="reference internal" href="#nosql" id="id63">Общие представления о&nbsp;NoSQL</a></li>
<li><a class="reference internal" href="#redis" id="id64">Общие представления о&nbsp;Redis</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id21" id="id65">Тестирование</a><ul>
<li><a class="reference internal" href="#unit" id="id66">Общие представления о&nbsp;unit-тестировании</a></li>
<li><a class="reference internal" href="#mysql" id="id67">Как протестировать функцию, которая изменяет запись в&nbsp;MySQL?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#devops" id="id68">DevOps/Администрирование</a><ul>
<li><a class="reference internal" href="#google-com" id="id69">Проблема с нечитаемым ответом&nbsp;google.com</a></li>
<li><a class="reference internal" href="#ip-nginx" id="id70">Топ <span class="caps">IP</span> адресов из лога <span class="caps">NGINX</span></a></li>
<li><a class="reference internal" href="#docker" id="id71">Docker</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id22" id="id72">Архитектура</a><ul>
<li><a class="reference internal" href="#pastebin" id="id73">Проектирование сервиса копипасты pastebin</a><ul>
<li><a class="reference internal" href="#id23" id="id74">Бизнес-описание</a></li>
<li><a class="reference internal" href="#id24" id="id75">Ограничения и&nbsp;допущения</a></li>
<li><a class="reference internal" href="#id25" id="id76">Ответить соискателю, если&nbsp;спросит</a></li>
<li><a class="reference internal" href="#id26" id="id77">Крупноблочная схема&nbsp;архитектуры</a></li>
<li><a class="reference internal" href="#write-api" id="id78">Write <span class="caps">API</span></a></li>
<li><a class="reference internal" href="#id27" id="id79">Создание уникального&nbsp;урла</a></li>
<li><a class="reference internal" href="#id28" id="id80">Запрос к Write <span class="caps">API</span></a></li>
<li><a class="reference internal" href="#id29" id="id81">Ответ Write <span class="caps">API</span></a></li>
<li><a class="reference internal" href="#read-api" id="id82">Запрос к Read <span class="caps">API</span></a></li>
<li><a class="reference internal" href="#id30" id="id83">Ответ Read <span class="caps">API</span></a></li>
<li><a class="reference internal" href="#id31" id="id84">Аналитика</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id32" id="id85">Полезные&nbsp;ссылки</a></li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id36">Введение</a></h2>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id37">Предпосылки</a></h3>
<ul class="simple">
<li>Разработка софта больше не искусство, не дело жизни, а обычная, хотя
и высококвалифицированная офисная работа. Поэтому особенно ценно в
кандидате то, как он работает в команде, как справляется с
повседневной работой. Как бы банально и избито это ни звучало. А вот
гениальные технические озарения и хитрые алгоритмы, на втором
плане. Те, для кого на первом, сами знают, каким должно быть
техническое&nbsp;собеседование.</li>
<li>Алгоритмическое собеседование это аналог <span class="caps">IQ</span>-тестов, изобретенных
американскими учеными в начале <span class="caps">XX</span> века для быстрой категоризации
больших масс призывников по родам войск. <span class="caps">IQ</span> дает представление об
интеллекте человека, но не исключает ошибок. Умение решать
алгоритмические задачи тоже дает представление об интеллекте
человека, но не лишено недостатков. Алгоритмические собеседования
нужны крупным компаниям, которым требуется быстро отобрать нужных
людей из огромных масс кандидатов и установить на входе грейд и
зарплату. Они могут позволить себе ошибку ненайма, потому что
кандидаты конкурируют за позиции в этих компаниях, а не наоборот,
как большинстве других случаев. Не стройте из себя Google, если вы
им не&nbsp;являетесь.</li>
<li>Интеллект человека это не бинарное &#8220;есть/нет&#8221; и не
диапазон. Интеллект &#8212; это что-то вроде швейцарского армейского
ножа-мультитула. В нем может быть острое и практичное лезвие для
повседневного использования, не слишком удобный штопор, которым все
же можно пользоваться, и бесполезная отвертка, которой не сделаешь
ничего. Можно ли дать интегральную оценку такому мультитулу?
Наверное, можно. Но непонятно, зачем. Если вы не Google,
конечно. Подбирайте нож под свои задачи и исходя из своих&nbsp;возможностей.</li>
<li>Собеседование нужно, чтобы понять, почему человек ушел (или готов
уйти) с текущего места работы, что он ищет на новом месте и что он
может предложить&nbsp;команде.</li>
<li>Ошибка найма обычно компенсируется испытательным сроком. Нужно
отнестись к нему серьезно и выдать задание на этот
период. Аналогично со стороны сотрудника. И все-таки ошибка найма &#8212;
это ошибка, которая стоит вам времени и денег. Лучшее ее не
совершать. Аналогично для сотрудника. Поэтому врать про проект не
стоит. Но уметь его красиво преподнести нисколько не
зазорно. Напротив, в условиях конкуренции компаний за кандидатов,
это ваша прямая&nbsp;обязанность.</li>
<li>Не бывает двух одинаковых собеседований даже для кандидатов одного
уровня. Техническое собеседование это всегда импровизация, попытка
найти границы компетентности и сильные стороны кандидата за короткий
промежуток&nbsp;времени.</li>
</ul>
</div>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id38">Отбор&nbsp;кандидатов</a></h3>
<ul class="simple">
<li>Не все люди умеют составлять&nbsp;резюме.</li>
<li>Слишком высокие зарплатные ожидания у интересного кандидата – не
повод отказываться от собеседования. Всегда можно позадавать
вопросы, которые снизят неоправданные зарплатные ожидания. Или
подтвердят, что перед вами&nbsp;гений.</li>
<li>Интевьюер, несомненно, самый умный и замечательный. Но это не повод
забраковывать резюме с грамматическими ошибками (как учат вас горе
HRы), смешными формулировками с проявлениями юношеской неопытности и
всяким таким прочим. Задавать неоправданно сложные вопросы тоже не
стоит. Оставьте высокомерие при&nbsp;себе.</li>
<li>Не нужно бояться звать на собеседование человека, который раньше
работал дизайнером/юристом/прорабом на заводе, но переучился на
разработчика. Будем же честны, разрабатывать вашу скучную <span class="caps">REST</span> <span class="caps">API</span>
много ума не надо, а профильное образование нужно далеко не&nbsp;везде.</li>
<li>У кандидата может не быть 100% попадания в ваш технологический стэк,
что не помешает ему в нем очень быстро разобраться. Скорее всего,
неразумно отвергать кандидата с опытом работы с Flask 3 года, но без
опыта работы с Django, на ваш заурядный Django-проект. Ну&nbsp;правда.</li>
<li>Единственный способ быстро найти разработчика: провести как можно
больше&nbsp;собеседований</li>
<li>Среднее время, которое затратит интервьюер на 1 собеседование: ~2.5
часа (отсмотр резюме, подготовка к интервью, само интервью, общение
с <span class="caps">HR</span> и <span class="caps">CTO</span>).</li>
<li>Не стоит делать техническое интервью дольше 2 часов. Идеально 1.5&nbsp;часа.</li>
<li>3 собеседования в неделю – это хороший темп. Больше – тяжело
(физически для интервьюера, для <span class="caps">HR</span> в смыле поиска кандидата и для
проекта в смысле отсутствия лида во время собеседований). Меньше –
подбор сотрудника&nbsp;затянется.</li>
<li>Среднее время поиска Python-разработчика зависит от проекта, грейда
и того, что может предложить ваша компания. В среднем 3 месяца от
размещения заявки в <span class="caps">HR</span> до первого дня работы нового сотрудника это&nbsp;нормально.</li>
<li>Ваш главный союзник в общегуманитарных вопросах собеседования - ваш
<span class="caps">HR</span>.</li>
<li>Не все разработчики – это тихие интроверты. Есть достаточное
количество людей, которые умеют говорить, продавать себя и выучивать
ответы для собеседований, не имея глубоких знаний. Не дайте себя
обмануть, обязательно давайте&nbsp;задачки.</li>
</ul>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id39">Гуманитарные&nbsp;вопросы</a></h3>
<ul class="simple">
<li>Что кандидат делал на прошлых местах работы. Какую позицию&nbsp;занимал?</li>
<li>Какой состав команды был на прошлых проектах (фронт, бэк, <span class="caps">QA</span>,
админы,&nbsp;менеджеры)?</li>
<li>Как был организован процесс планирования, постановки задач и ревью?
Какие в этом были плюсы и&nbsp;минусы?</li>
<li>Почему кандидат решил уйти (или уже ушел) с прошлого места&nbsp;работы?</li>
<li>Что хотелось бы от нового проекта? В смысле задач и&nbsp;процессов?</li>
</ul>
</div>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id40">Python</a></h2>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id41">Проверка знаний, как развивается&nbsp;язык</a></h3>
<ul class="simple">
<li>Расскажи, что появилось в последней версии Python? (<a class="reference external" href="https://docs.python.org/3/whatsnew/3.8.html">Python 3.8</a> на момент создания&nbsp;статьи)</li>
<li>В чем состоят <a class="reference external" href="https://docs.python.org/3.0/whatsnew/3.0.html">основные различия</a> между Python 2.7 и&nbsp;3.0</li>
<li>Какие синтаксические изменения произошли в языке после Python 2.7?
(хочется услышать как минимум об asyncio и type&nbsp;hinting)</li>
</ul>
</div>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id42">Основные типы и структуры данных в&nbsp;Python</a></h3>
<ul class="simple">
<li>Назови основные типы данных в&nbsp;Python</li>
<li>Расскажи, какие структуры данных есть в&nbsp;Python</li>
<li>На какие два больших класса можно разделить типы/структуры данных? (mutable,&nbsp;immutable)</li>
<li>Зачем вообще нужны immutable объекты? Почему нельзя везде использовать&nbsp;mutable?</li>
<li>Какие строки в примере ниже выбросят исключение? Какие&nbsp;исключения?</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">d</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">d</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># TypeError: unhashable type: &#39;list&#39;</span>
<span class="n">d</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])]</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1"># TypeError: unhashable type: &#39;list&#39;</span>
</pre></div>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id43">Порядок вычисления дефолтных аргументов&nbsp;функций</a></h3>
<p>У нас есть&nbsp;функция:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fun_default</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">lst</span><span class="p">:</span> <span class="nb">list</span><span class="o">=</span><span class="p">[])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lst</span>
</pre></div>
<p>Какие значения будут иметь следующие списки после выполнения всего блока&nbsp;присваиваний:</p>
<div class="highlight"><pre><span></span><span class="n">l1</span> <span class="o">=</span> <span class="n">fun_default</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">fun_default</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[])</span>
<span class="n">l3</span> <span class="o">=</span> <span class="n">fun_default</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span> <span class="c1"># [1, 3]</span>
<span class="k">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span> <span class="c1"># [2]</span>
<span class="k">print</span><span class="p">(</span><span class="n">l3</span><span class="p">)</span> <span class="c1"># [1, 3]</span>
</pre></div>
<p>Как поправить эту функцию, чтобы ответ был [1], [2], [3]&nbsp;соответственно?</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fun_default_fixed</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">lst</span><span class="p">:</span> <span class="nb">list</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">lst</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lst</span>
</pre></div>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id44">Что такое&nbsp;декоратор?</a></h3>
<ul class="simple">
<li>Что такое&nbsp;декоратор?</li>
<li>Какие декораторы из коробки&nbsp;знаешь?</li>
<li>Расскажи про <a class="reference external" href="https://docs.python.org/3.7/howto/descriptor.html">протокол descriptor</a> (сложный вопрос, можно раскручивать&nbsp;долго)</li>
</ul>
</div>
<div class="section" id="stdout">
<h3><a class="toc-backref" href="#id45">Декоратор, выводящий в stdout время выполнения&nbsp;функции</a></h3>
<p>У нас есть функция, которая обращается в БД. Хочется, чтобы каждый
вызов этой функции показывал в консоли время ее выполнения. Реализуй
этот функционал с помощью декоратора. Допущение: декорируемая функция
может иметь любое количество позиционных и непозиционных&nbsp;аргументов.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">measure</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wrapper function&quot;&quot;&quot;</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>
</div>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id46">Применение&nbsp;декоратора</a></h3>
<p>Как можно применить декоратор к функции <cite>fun</cite>, используя синтаксический сахар и без&nbsp;него?</p>
<div class="highlight"><pre><span></span><span class="c1"># with syntactic sugar</span>
<span class="nd">@measure</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># sugar free</span>
<span class="n">fun</span> <span class="o">=</span> <span class="n">measure</span><span class="p">(</span><span class="n">fun</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">fun</span><span class="p">)</span> <span class="c1"># function</span>
</pre></div>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id47">Имя декорированной&nbsp;функции</a></h3>
<p>Какое имя и <cite>docstring</cite> будут у функции после применения к ней&nbsp;декоратора?</p>
<div class="highlight"><pre><span></span><span class="n">fun</span><span class="o">.</span><span class="vm">__name__</span>  <span class="c1"># &#39;wrapper&#39;</span>
<span class="n">fun</span><span class="o">.</span><span class="vm">__doc__</span>  <span class="c1"># &#39;Wrapper function&#39;</span>
</pre></div>
<p>Как вернуть задекорированной функции оригинальное имя и <cite>doctring</cite>?</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">measure</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wrapper function&quot;&quot;&quot;</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@measure</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;My func&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="n">fun</span><span class="o">.</span><span class="vm">__name__</span>  <span class="c1"># &#39;fun&#39;</span>
<span class="n">fun</span><span class="o">.</span><span class="vm">__doc__</span>  <span class="c1"># &#39;My func&#39;</span>
</pre></div>
<p>Как добиться того же эффекта без <cite>functools.wraps</cite>?</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">measure</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wrapper function&quot;&quot;&quot;</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="n">wrapper</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span>
    <span class="n">wrapper</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>
</div>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id48">Декоратор для&nbsp;генераторов</a></h3>
<p>Какое время будет выводиться, если применить декоратор к&nbsp;генератору?</p>
<p>Допустим, мы применим написанный выше декоратор к такой&nbsp;функции:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Any</span>

<span class="k">def</span> <span class="nf">fun_gen</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
          <span class="k">yield</span> <span class="n">i</span>
</pre></div>
<p>Почему в консоли время, выведенное декоратором, такое маленькое?
Как замерить время итерации по всему&nbsp;генератору?</p>
<p>Этот вариант декоратора прокрутит генератор до конца и выведет общее время&nbsp;итерирования:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Any</span>

<span class="k">def</span> <span class="nf">measure_gen</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">yield from</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@measure_gen</span>
<span class="k">def</span> <span class="nf">fun_gen</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">i</span>
</pre></div>
</div>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id49">Декоратор с&nbsp;аргументами</a></h3>
<p>Перепиши декоратор из задачи выше так, чтобы в него можно было
передать аргумент, который будет устанавливать пороговое значение,
начиная с которого будет выводиться время исполнения декорируемой&nbsp;функции:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">measure</span><span class="p">(</span><span class="n">limit</span><span class="p">):</span>
    <span class="c1"># Don&#39;t forget to set limit when decorating a function!</span>
    <span class="k">def</span> <span class="nf">outer_wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">inner_wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

            <span class="n">elapsed</span> <span class="o">=</span> <span class="n">after</span> <span class="o">-</span> <span class="n">before</span>
            <span class="k">if</span> <span class="n">elapsed</span> <span class="o">&gt;</span> <span class="n">limit</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">inner_wrapper</span>
    <span class="k">return</span> <span class="n">outer_wrapper</span>
</pre></div>
<p>Покажи, как использовать этот декоратор с синтаксическим сахаром и без&nbsp;него.</p>
<div class="highlight"><pre><span></span><span class="c1"># syntactic sugar</span>
<span class="nd">@measure</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># sugar free</span>
<span class="n">new_measure</span> <span class="o">=</span> <span class="n">measure</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">fun</span> <span class="o">=</span> <span class="n">new_measure</span><span class="p">(</span><span class="n">fun</span><span class="p">)</span>
<span class="n">fun</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<div class="section" id="id15">
<h3><a class="toc-backref" href="#id50">Переменные&nbsp;класса</a></h3>
<p>Что такое переменная&nbsp;класса?</p>
<p>Даны следующие&nbsp;классы:</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">class</span> <span class="nc">Child1</span><span class="p">(</span><span class="n">Parent</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Child2</span><span class="p">(</span><span class="n">Parent</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
<p>Что выведут следующие&nbsp;строки?</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">Parent</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># 1 1 1</span>

<span class="n">Child1</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">Parent</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># 1 2 1</span>

<span class="n">Parent</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">print</span><span class="p">(</span><span class="n">Parent</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># 3 2 3</span>
</pre></div>
</div>
<div class="section" id="id16">
<h3><a class="toc-backref" href="#id51">Слайсы в&nbsp;списках</a></h3>
<p>Как исполнятся следующие&nbsp;строки?</p>
<div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># [2]</span>
<span class="n">l</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># [1, 2, 3, 4]</span>
<span class="n">l</span><span class="p">[</span><span class="mi">10</span><span class="p">:]</span>  <span class="c1"># []</span>
<span class="n">l</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>  <span class="c1"># IndexError</span>
</pre></div>
</div>
<div class="section" id="list-dict-comprehensions">
<h3><a class="toc-backref" href="#id52">Что такое list/dict&nbsp;comprehensions?</a></h3>
<p>Создай список квадрат четных чисел от [0, 10), используя list&nbsp;comprehension</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
<p>То же самое, используя map и&nbsp;filter?</p>
<div class="highlight"><pre><span></span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
</pre></div>
</div>
<div class="section" id="generator-expressions">
<h3><a class="toc-backref" href="#id53">Generator&nbsp;expressions</a></h3>
<p>Как превратить первый пример в generator (generator&nbsp;expression)?</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="functools">
<h3><a class="toc-backref" href="#id54">Какие полезные функции из модуля functools ты&nbsp;знаешь?</a></h3>
<p>Этот вопрос можно задавать после вопроса про декораторы и
functools.wraps. В functools много всякого интересного.  Хотелось бы
услышать про reduce и особенно про&nbsp;partial.</p>
</div>
<div class="section" id="asyncio-multithreading-multiprocessing">
<h3><a class="toc-backref" href="#id55">Asyncio, multithreading,&nbsp;multiprocessing</a></h3>
<ul class="simple">
<li>В чем разница между процессом и&nbsp;трэдом?</li>
<li>Есть лист из 1к урлов, по каждому из них нужно сделать <span class="caps">GET</span>
запрос. Как это сделать быстрее и дешевле? (<span class="caps">IO</span>-bound tasks -&gt;
asyncio, Tornado etc или&nbsp;multithreading)</li>
<li>Есть 1к видеофайлов, которые надо отрендерить, или 1к программ,
которые надо скомпилировать. Как это сделать быстрее? (<span class="caps">CPU</span>-bound
tasks -&gt;&nbsp;multiprocessing)</li>
<li>Как устроен asyncio или аналогичные библиотеки для асинхронного
программирования в Python? (огромный вопрос, который можно превратить
в целое собеседование. Хочется как минимум понимания на уровне
<a class="reference external" href="https://trio.readthedocs.io/en/latest/tutorial.html">туториала Trio</a>)</li>
</ul>
</div>
<div class="section" id="id17">
<h3><a class="toc-backref" href="#id56">Экосистема&nbsp;языка</a></h3>
<ul class="simple">
<li>Какие решения существуют для выполнения фоновых отложенных задач? (<cite>celery</cite>)</li>
<li>Как сделать package из Python-кода? (wheels, eggs, в чем&nbsp;отличия?)</li>
<li>Какие есть решения для документирования кода на Python? (<cite>sphinx-doc</cite>)</li>
<li>Какие есть решения для документирования <span class="caps">REST</span> <span class="caps">API</span> (<cite>swagger</cite>)</li>
<li>Назови <span class="caps">ORM</span>, с которыми ты работал (<cite>SQLAlchemy</cite>, <cite>Django <span class="caps">ORM</span></cite>)</li>
<li>Какие статические анализаторы кода, линтеры для Python ты знаешь? (<cite>mypy</cite>, <cite>flake8</cite>)</li>
<li>Какие web-фреймворки тебе известны? (<cite>Flask</cite>, <cite>Django</cite>, <cite>aiohttp</cite>, <cite>sanic</cite>,&nbsp;etc.)</li>
<li>Какие package management tools ты знаешь? (<cite>pip</cite>, <cite>pipenv</cite>, <cite>poetry</cite>,&nbsp;etc.)</li>
</ul>
</div>
</div>
<div class="section" id="id18">
<h2><a class="toc-backref" href="#id57">Алгоритмы</a></h2>
<div class="section" id="id19">
<h3><a class="toc-backref" href="#id58">Временная&nbsp;сложность</a></h3>
<ul class="simple">
<li>Что такое временная сложность (time&nbsp;complexity)?</li>
<li>Что такое большая&nbsp;O?</li>
<li>Какая временная сложность вот такой&nbsp;операции:</li>
</ul>
<div class="highlight"><pre><span></span><span class="c1"># O(n^2)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">n</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">n</span><span class="p">:</span>
         <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
<p>Какова временная сложность для следующих&nbsp;стейтментов?</p>
<div class="highlight"><pre><span></span><span class="n">x</span> <span class="ow">in</span><span class="o">/</span><span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span> <span class="c1"># где type(s) is list/tuple # O(n)</span>
<span class="n">x</span> <span class="ow">in</span><span class="o">/</span><span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span> <span class="c1"># где type(s) is set        # O(1)</span>
<span class="nb">list</span><span class="o">.</span><span class="n">append</span><span class="p">()</span>                             <span class="c1"># O(1)</span>
<span class="nb">list</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>                             <span class="c1"># O(n)</span>
<span class="nb">list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>                               <span class="c1"># O(1)</span>
<span class="nb">list</span><span class="o">.</span><span class="n">sort</span>                                 <span class="c1"># O(n log n)</span>
</pre></div>
<p>Можно еще поспрашивать временную сложность операций над <a class="reference external" href="https://wiki.python.org/moin/TimeComplexity">другими
структурами данных</a>.</p>
</div>
<div class="section" id="lisp">
<h3><a class="toc-backref" href="#id59">Проверка сбалансированности скобок в&nbsp;Lisp-программе</a></h3>
<p>Я обожаю программировать на Racket – это диалект Lisp, который
славится большим <a class="reference external" href="https://blog.pilosus.org/images/git-the-princess.png">количеством скобочек</a>. Напиши функцию на Python,
которая будет получать на вход текст (строку) и возвращать <cite>True</cite>,
если скобки в тексте сбалансированы и <cite>False</cite> в противном&nbsp;случае.</p>
<p>Примеры сбалансированных&nbsp;скобочек:</p>
<div class="highlight"><pre><span></span><span class="s2">&quot;()&quot;</span>
<span class="s2">&quot;(())&quot;</span>
<span class="s2">&quot;(custom-set-variables &#39;(inhibit-startup-screen t) &#39;(package-selected-packages (quote</span>
<span class="p">(</span><span class="n">sql</span><span class="o">-</span><span class="n">indent</span> <span class="n">magit</span> <span class="n">dockerfile</span><span class="o">-</span><span class="n">mode</span> <span class="n">yaml</span><span class="o">-</span><span class="n">mode</span> <span class="n">gitlab</span> <span class="n">markdown</span><span class="o">-</span><span class="n">mode</span> <span class="n">lorem</span><span class="o">-</span><span class="n">ipsum</span> <span class="n">jedi</span>
<span class="n">elpy</span> <span class="n">anaconda</span><span class="o">-</span><span class="n">mode</span> <span class="n">afternoon</span><span class="o">-</span><span class="n">theme</span><span class="p">))))</span><span class="s2">&quot;</span>
<span class="s2">&quot;(hello [world {!}])&quot;</span>
</pre></div>
<p>Примеры несбалансированных&nbsp;скобочек:</p>
<div class="highlight"><pre><span></span><span class="s2">&quot;(&quot;</span>
<span class="s2">&quot;)(&quot;</span>
<span class="s2">&quot;())&quot;</span>
<span class="s2">&quot;({))&quot;</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">balance</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Return True if string&#39;s parentheses are balanced, False otherwise</span>

<span class="sd">  &gt;&gt;&gt; balance(&quot;&quot;)</span>
<span class="sd">  True</span>
<span class="sd">  &gt;&gt;&gt; balance(&quot;(())&quot;)</span>
<span class="sd">  True</span>
<span class="sd">  &gt;&gt;&gt; balance(&quot;))((&quot;)</span>
<span class="sd">  False</span>
<span class="sd">  &gt;&gt;&gt; balance(&quot;()()(())(()())&quot;)</span>
<span class="sd">  True</span>
<span class="sd">  &gt;&gt;&gt; balance(&quot;(]&quot;)</span>
<span class="sd">  False</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">opening</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">}</span>
  <span class="n">closing</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">}</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">opening</span><span class="p">,</span> <span class="n">closing</span><span class="p">))</span>
  <span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">opening</span><span class="p">:</span>
          <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mapping</span><span class="p">[</span><span class="n">ch</span><span class="p">])</span>
      <span class="k">elif</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">closing</span><span class="p">:</span>
          <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">stack</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">ch</span> <span class="o">!=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()):</span>
              <span class="k">return</span> <span class="bp">False</span>
  <span class="k">return</span> <span class="ow">not</span> <span class="n">stack</span>
</pre></div>
<p>Если кандидату трудно придумать решение для скобочек разных типов,
можно упростить задание до поверки, например, только круглых&nbsp;скобочек.</p>
</div>
</div>
<div class="section" id="id20">
<h2><a class="toc-backref" href="#id60">Базы&nbsp;данных</a></h2>
<div class="section" id="rdbms">
<h3><a class="toc-backref" href="#id61">Зачем нужна <span class="caps">RDBMS</span>?</a></h3>
<p>У нас стартап из <span class="caps">CTO</span>, <span class="caps">CEO</span> и одного разработчика. Админов нету. Мы
пишем сервис аутентификации – регистрация пользотелей, проверка прав –
на Python. Зачем нам нужна БД? Почему бы не использовать текстовый
файл?  Стандартная библиотека языка имеет все необходимое для работы с
файлами. Записываем логин и хэш пароля при регистрации, читаем при
запросе доступа. Это просто. Не требует админитрирования, избавляет от
зависимостей.  При сложностях, можно переформулировать вопрос так –
какие существуют механизмы реляционной БД, достаточно сложные для их
самостоятельно реализации, но необходимые для нашего&nbsp;случая?</p>
<p>От кандидата хочется услышать упоминания следующих&nbsp;механизмов:</p>
<ul class="simple">
<li>индекс</li>
<li>связи&nbsp;таблиц</li>
<li>транзакции</li>
</ul>
<p>Про каждый механизм можно поспрашивать отдельно. Например, про индекс
можно&nbsp;спросить:</p>
<ul class="simple">
<li>временная сложность для поиска по&nbsp;индексу</li>
<li>в таблице <cite>candidates</cite> есть колонка <cite>is_interviewed</cite> с возможными
значениями 0 и 1. какой прирост произодительности для поиска по этой
колонке даст индекс для&nbsp;нее?</li>
<li>что такое составные индексы? есть ли какие-то правила для запросов
по колонкам, участвующим в составном&nbsp;индексе?</li>
</ul>
</div>
<div class="section" id="mysql-postgresql">
<h3><a class="toc-backref" href="#id62">Запросы в&nbsp;MySQL/PostgreSQL</a></h3>
<p>У нас есть сервис по типу iTunes, где можно арендовать/покупать
видео. Вот схема таблиц реляционной базы, положим, в&nbsp;PostgreSQL</p>
<div class="figure">
<a class="reference external image-reference" href="https://blog.pilosus.org/images/sql-tables.pdf"><img alt="Схема таблиц реляционной базы данных для технического собеседования" class="responsive" src="https://blog.pilosus.org/images/sql-tables.jpg" /></a>
</div>
<p>Напиши запрос, который выведет топ-20 фильмов, в которых играет актер John Doe. Запрос должен&nbsp;выводить:</p>
<ul class="simple">
<li>Название&nbsp;фильма</li>
<li>Язык&nbsp;издания</li>
<li>Год&nbsp;выпуска</li>
</ul>
<p>Результаты нужно упорядочить по убыванию года&nbsp;выпуска.</p>
<p>(Если нужна подсказка) на основе таблиц: <cite>film</cite>, <cite>language</cite>, <cite>film_actor</cite>, <cite>actor</cite></p>
<div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">f</span><span class="p">.</span><span class="n">title</span><span class="p">,</span> <span class="n">l</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">f</span><span class="p">.</span><span class="n">release_year</span>
<span class="k">FROM</span> <span class="n">film</span> <span class="k">AS</span> <span class="n">f</span>
<span class="k">JOIN</span> <span class="k">language</span> <span class="k">AS</span> <span class="n">l</span> <span class="k">ON</span> <span class="n">l</span><span class="p">.</span><span class="n">language_id</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">language_id</span>
<span class="k">JOIN</span> <span class="n">film_actor</span> <span class="k">AS</span> <span class="n">fa</span> <span class="k">ON</span> <span class="n">fa</span><span class="p">.</span><span class="n">film_id</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">film_id</span>
<span class="k">JOIN</span> <span class="n">actor</span> <span class="k">AS</span> <span class="n">a</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">actor_id</span> <span class="o">=</span> <span class="n">fa</span><span class="p">.</span><span class="n">actor_id</span>
<span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">first_name</span> <span class="o">=</span> <span class="s1">&#39;John&#39;</span> <span class="k">AND</span> <span class="n">a</span><span class="p">.</span><span class="n">last_name</span> <span class="o">=</span> <span class="s1">&#39;Doe&#39;</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">f</span><span class="p">.</span><span class="n">release_year</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">20</span><span class="p">;</span>
</pre></div>
<p>Напиши запрос, который выведет топ-10 клиентов, которые оставили в
сервисе больше всего денег, но не менее 100 у.е. Запрос должен&nbsp;выводить:</p>
<ul class="simple">
<li><span class="caps">ID</span> и полное имя&nbsp;клиента</li>
<li>сумму всех заказов&nbsp;юзера</li>
</ul>
<p>(Если нужна подсказка) на основе таблиц: <cite>payment</cite>, <cite>customer</cite></p>
<div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="k">c</span><span class="p">.</span><span class="n">customer_id</span><span class="p">,</span> <span class="k">c</span><span class="p">.</span><span class="n">first_name</span><span class="p">,</span> <span class="k">c</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">amount</span><span class="p">)</span> <span class="k">AS</span> <span class="n">money</span>
<span class="k">FROM</span> <span class="n">payment</span> <span class="k">AS</span> <span class="n">p</span>
<span class="k">JOIN</span> <span class="n">customer</span> <span class="k">AS</span> <span class="k">c</span> <span class="k">ON</span> <span class="k">c</span><span class="p">.</span><span class="n">customer_id</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">customer_id</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="k">c</span><span class="p">.</span><span class="n">customer_id</span>
<span class="k">HAVING</span> <span class="k">SUM</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">amount</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">100</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">money</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</pre></div>
</div>
<div class="section" id="nosql">
<h3><a class="toc-backref" href="#id63">Общие представления о&nbsp;NoSQL</a></h3>
<p>Что такое NoSQL БД? Какие типы NoSQL БД выделяют?&nbsp;Примеры</p>
<p>Хочется услышать хотя бы самые общие вещи: NoSQL БД &#8212; коллекция
данных в одном из форматов (см. типы ниже). Данные денормализованы,
<span class="caps">JOIN</span> реализуют обычно на уровне&nbsp;приложения.</p>
<p>Типы NoSQL&nbsp;БД:</p>
<ul class="simple">
<li>key-value store (реализация hash table: Redis,&nbsp;AeroSpike)</li>
<li>document-store (аналогично key-value, но в качестве значения документ, например, <span class="caps">JSON</span>:&nbsp;MongoDB)</li>
<li>wide column store (HBase,&nbsp;Cassandra)</li>
<li>graph database&nbsp;(Neo4j)</li>
</ul>
</div>
<div class="section" id="redis">
<h3><a class="toc-backref" href="#id64">Общие представления о&nbsp;Redis</a></h3>
<p>Что такое Redis? Почему его так любят использовать для хранения кэшей?
Чем, с точки зрения хранения данных, он принципиально отличается от,
например, MySQL? Что произойдет с данными в Redis, если прозойдет
рестарт сервера?  Какие существуют механизмы для High Availability в&nbsp;Redis?</p>
<p>Ожидания от ответа: Redis – это in-memory key-value БД. У нее есть
механизм снапшотов данных из памяти на диск. Для <span class="caps">HA</span> используют,
например, Redis&nbsp;Sentinel</p>
</div>
</div>
<div class="section" id="id21">
<h2><a class="toc-backref" href="#id65">Тестирование</a></h2>
<div class="section" id="unit">
<h3><a class="toc-backref" href="#id66">Общие представления о&nbsp;unit-тестировании</a></h3>
<ul class="simple">
<li>Что это&nbsp;такое?</li>
<li>Чем отличается от интеграционного, функционального&nbsp;тестирования?</li>
<li>Какие библиотеки для Python использовал для этого? (<cite>unittest</cite>,
<cite>pytest</cite>, в чем&nbsp;разница?)</li>
<li>Когда нужно писать unit-тест? (в существующем проекте, в новом
проекте, при починке бага, при реализации&nbsp;фичи)</li>
</ul>
</div>
<div class="section" id="mysql">
<h3><a class="toc-backref" href="#id67">Как протестировать функцию, которая изменяет запись в&nbsp;MySQL?</a></h3>
<p>Есть функция, которая выполняет <cite><span class="caps">INSERT</span></cite> в тестовой базе данных MySQL,
которой пользуются все разработчики команды. Нужно написать тест на
эту функцию. Но не хочется вносить изменения в общую базу. Как можно
решить эту&nbsp;проблему?</p>
<ul class="simple">
<li>mock</li>
<li>transaction&nbsp;rollback</li>
</ul>
</div>
</div>
<div class="section" id="devops">
<h2><a class="toc-backref" href="#id68">DevOps/Администрирование</a></h2>
<div class="section" id="google-com">
<h3><a class="toc-backref" href="#id69">Проблема с нечитаемым ответом&nbsp;google.com</a></h3>
<p>Я захожу на <cite>https://www.google.com</cite> в браузере, открываю исходный код
и вижу вполне читаемый&nbsp;текст.</p>
<p>Но если я делаю такой запрос через <cite>curl</cite> то вижу нечто нечитаемое,
похожее на бинарный&nbsp;файл:</p>
<div class="highlight"><pre><span></span>&gt; GET / HTTP/2
&gt; Host: www.google.com
&gt; User-Agent: curl/7.58.0
&gt; Accept: */*
&gt; Accept-Encoding: gzip, deflate

%�j��~d+.K�W��me<span class="sb">`</span>�,x�x�m�G�67��<span class="sb">`</span><span class="nv">$#</span>������~<span class="o">{</span>d���<span class="o">]</span>�.<span class="err">&#39;</span>����
����Q���Mʥu���&lt;�O<span class="o">)</span>,�<span class="p">&amp;</span>�����,���E�.���_�
<span class="p">&amp;</span>�I<span class="se">\�</span>�p��#<span class="o">]</span>�,�����K+����p�vk
j���k<span class="s2">&quot;�fe�=�`�J4�I/��m6{�E���;3+�v�BT1T��(W��J��m�yO��</span>
<span class="s2">�j��</span>
</pre></div>
<p>Почему так&nbsp;происходит?</p>
<p>Для&nbsp;интервьюера:</p>
<div class="highlight"><pre><span></span>curl -v <span class="s2">&quot;https://www.google.com&quot;</span> --header <span class="s2">&quot;Accept-Encoding: gzip, deflate&quot;</span> --output -
</pre></div>
</div>
<div class="section" id="ip-nginx">
<h3><a class="toc-backref" href="#id70">Топ <span class="caps">IP</span> адресов из лога <span class="caps">NGINX</span></a></h3>
<p>Наш сервис парсят боты. Это создает большую нагрузку, мешающую
нормальным пользователям. Мы решаем забанить ботов по <span class="caps">IP</span>-адресам. Для
этого мы хотим составить топ <span class="caps">IP</span>-адресов, с которых приходили
запросы. Мы просим админов сделать выгрузку логов за 1&nbsp;час.</p>
<p>С помощью стандартных <span class="caps">GNU</span> utils создай файл с топом <span class="caps">IP</span>-адресов в
порядке убывания частоты запросов.  Предположим, что <span class="caps">IP</span>-адрес
находится в 9-й колонке лога, колонки отделяются через <cite>t</cite></p>
<div class="highlight"><pre><span></span>awk <span class="s1">&#39;{print $9}&#39;</span> nginx.log <span class="p">|</span> sort <span class="p">|</span> uniq -c <span class="p">|</span> awk <span class="s1">&#39;{print $1&quot;,&quot;$2}&#39;</span> <span class="p">|</span> sort -r -t, -nk1 &gt; bots.csv
</pre></div>
</div>
<div class="section" id="docker">
<h3><a class="toc-backref" href="#id71">Docker</a></h3>
<ul class="simple">
<li>Что такое докер&nbsp;контейнер?</li>
<li>В чем отличие от virtualbox и других виртуальных&nbsp;машин?</li>
<li>Зачем использовать докер, если можно просто скопировать файлы на&nbsp;машину?</li>
<li>Почему нельзя просто использовать&nbsp;virtualenv?</li>
</ul>
</div>
</div>
<div class="section" id="id22">
<h2><a class="toc-backref" href="#id72">Архитектура</a></h2>
<p><strong>Parental advisory: highly opinionated content&nbsp;(35+)</strong></p>
<div class="section" id="pastebin">
<h3><a class="toc-backref" href="#id73">Проектирование сервиса копипасты&nbsp;pastebin</a></h3>
<div class="section" id="id23">
<h4><a class="toc-backref" href="#id74">Бизнес-описание</a></h4>
<ul class="simple">
<li>Пользователь сабмитит&nbsp;текст</li>
<li>Текст сохраняется, ему присваивается уникальный <span class="caps">URL</span></li>
<li>По переходу по сгенерированному <span class="caps">URL</span> мы видим&nbsp;текст</li>
<li>Текст хранится какой-то срок (в&nbsp;минутах)</li>
<li>Сервис удаляет просроченные&nbsp;тексты</li>
<li>Сервис&nbsp;высоконагруженый</li>
<li>Нужна статистика для посещения различных урлов по&nbsp;месяцам</li>
</ul>
</div>
<div class="section" id="id24">
<h4><a class="toc-backref" href="#id75">Ограничения и&nbsp;допущения</a></h4>
<ul class="simple">
<li>Пасты только&nbsp;текстовые</li>
<li>Аналитика может быть не&nbsp;реалтаймовой</li>
<li>10 миллионов записей в месяц
(3.85 <span class="caps">RPS</span>)</li>
<li>100 миллионов чтений в месяц
(38.5 <span class="caps">RPS</span>)</li>
<li>Железо планируем на 3 года&nbsp;вперед</li>
</ul>
</div>
<div class="section" id="id25">
<h4><a class="toc-backref" href="#id76">Ответить соискателю, если&nbsp;спросит</a></h4>
<ul class="simple">
<li>Средний размер пасты&nbsp;1Kb</li>
<li>Короткая ссылка длиной 7 байт в&nbsp;БД</li>
<li><span class="caps">TTL</span> ссылки в минутах 4 байта в&nbsp;БД</li>
<li>Время создания ссылки 5&nbsp;байт</li>
<li>Путь хранения файла пасты - 255&nbsp;байт</li>
<li>Итого: 1.27 Кбайт на 1&nbsp;пасту</li>
</ul>
<p>1.27 Гб пасты в месяц
За 3 года:
- 36 * 12.7 = 457 Гб пасты
- 36 * 10 = 360 млн&nbsp;урлов</p>
</div>
<div class="section" id="id26">
<h4><a class="toc-backref" href="#id77">Крупноблочная схема&nbsp;архитектуры</a></h4>
<div class="highlight"><pre><span></span>  Client
    |
    V
Load Balancer
    |
    V
 Web Server (Reverse Proxy, i.e. Nginx)
  |      |
  V      V
Write   Read                                Analytics (MapReduce)
API     API---------------------------       |         |
 |       |        |                  |       |         |
 |       V        |                  |       |         |
 |      Cache     |                  |       |         V
 ------------------------------      |       |       SQL for Analytics
 V                |            |     |       |
SQL-----------    |            V     V       V
 |_Master    |    |           Object (File) Store
 |_Slave     V    |
            SQL   V
 ^              Read-only Replica
 |
 |
Periodic Task
(remove expired)
</pre></div>
</div>
<div class="section" id="write-api">
<h4><a class="toc-backref" href="#id78">Write <span class="caps">API</span></a></h4>
<ol class="arabic simple">
<li>Генерит <span class="caps">URL</span>, проверяет уникальность в <span class="caps">SQL</span></li>
<li>Если уникальное, делает <span class="caps">INSERT</span> в таблицу, иначе идет в п.&nbsp;1</li>
</ol>
<div class="highlight"><pre><span></span><span class="n">shortlink</span> <span class="nb">char</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="n">expiration_in_minutes</span> <span class="nb">int</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="n">created_at</span> <span class="n">datetime</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="n">paste_path</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">shortlink</span><span class="p">)</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">shortlink_idx</span> <span class="k">ON</span> <span class="n">pastes</span> <span class="p">(</span><span class="n">shortlink</span><span class="p">)</span> <span class="k">USING</span> <span class="n">BTREE</span><span class="p">;;</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">created_at_idx</span> <span class="k">ON</span> <span class="n">pastes</span> <span class="p">(</span><span class="n">created_at</span><span class="p">)</span> <span class="k">USING</span> <span class="n">BTREE</span><span class="p">;;</span>
</pre></div>
</div>
<div class="section" id="id27">
<h4><a class="toc-backref" href="#id79">Создание уникального&nbsp;урла</a></h4>
<ol class="arabic simple">
<li>Берем рандомную строку (или <span class="caps">IP</span> address юзера + timestamp) и вычисляем <span class="caps">MD5</span></li>
<li>Кодируем <cite>Base 62</cite> (как Base 64 но без&nbsp;escape-символов)</li>
</ol>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">base_encode</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">62</span><span class="p">):</span>
    <span class="n">digits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span>
      <span class="n">remainder</span> <span class="o">=</span> <span class="n">modulo</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
      <span class="n">digits</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">remainder</span><span class="p">)</span>
      <span class="n">num</span> <span class="o">=</span> <span class="n">divide</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
    <span class="n">digits</span> <span class="o">=</span> <span class="n">digits</span><span class="o">.</span><span class="n">reverse</span>
</pre></div>
<p>От строки в Base 62 можем взять 7 символов это даст 62**7 возможных
значений (это намного больше чем 360 миллионов урлов, которые мы
планируем на 3&nbsp;года)</p>
<div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">base_encode</span><span class="p">(</span><span class="n">md5</span><span class="p">(</span><span class="n">ip_address</span><span class="o">+</span><span class="n">timestamp</span><span class="p">))[:</span><span class="n">URL_LENGTH</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="id28">
<h4><a class="toc-backref" href="#id80">Запрос к Write <span class="caps">API</span></a></h4>
<div class="highlight"><pre><span></span>$ curl -X POST https://pastebin.com/api/v1.0/paste <span class="se">\</span>
       --data <span class="s1">&#39;{ &quot;expiration_in_minutes&quot;: &quot;60&quot;, &quot;paste_contents&quot;: &quot;My paste&quot; }&#39;</span>
</pre></div>
</div>
<div class="section" id="id29">
<h4><a class="toc-backref" href="#id81">Ответ Write <span class="caps">API</span></a></h4>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;shortlink&quot;</span><span class="o">:</span> <span class="s2">&quot;xJlsmeT&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="read-api">
<h4><a class="toc-backref" href="#id82">Запрос к Read <span class="caps">API</span></a></h4>
<div class="highlight"><pre><span></span>$ curl https://pastebin.com/api/v1.0/paste?shortlink<span class="o">=</span>xJlsmeT
</pre></div>
</div>
<div class="section" id="id30">
<h4><a class="toc-backref" href="#id83">Ответ Read <span class="caps">API</span></a></h4>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;paste&quot;</span><span class="o">:</span> <span class="s2">&quot;My paste&quot;</span>
    <span class="s2">&quot;created_at&quot;</span><span class="o">:</span> <span class="s2">&quot;YYYY-MM-DD HH:MM:SS&quot;</span>
    <span class="s2">&quot;expiration_in_minutes&quot;</span><span class="o">:</span> <span class="s2">&quot;60&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="id31">
<h4><a class="toc-backref" href="#id84">Аналитика</a></h4>
<p>Поскольку не нужен реалтайм, будем брать логи с реверс прокси и
скартимливать их в&nbsp;MapReduce</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HitCounts</span><span class="p">(</span><span class="n">MRJob</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">extract_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extract the generated url from the log line.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">extract_year_month</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the year and month portions of the timestamp.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">mapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse each log line, extract and transform relevant lines.</span>

<span class="sd">        Emit key value pairs of the form:</span>

<span class="sd">        (2016-01, url0), 1</span>
<span class="sd">        (2016-01, url0), 1</span>
<span class="sd">        (2016-01, url1), 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_url</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_year_month</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">period</span><span class="p">,</span> <span class="n">url</span><span class="p">),</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">reducer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sum values for each key.</span>

<span class="sd">        (2016-01, url0), 2</span>
<span class="sd">        (2016-01, url1), 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield</span> <span class="n">key</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id32">
<h2><a class="toc-backref" href="#id85">Полезные&nbsp;ссылки</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://www.toptal.com/python/interview-questions">Toptal Python Interview&nbsp;Questions</a></li>
<li>Python Interview Questions (<a class="reference external" href="https://luminousmen.com/post/6">junior</a>, <a class="reference external" href="https://luminousmen.com/post/7">middle</a>, <a class="reference external" href="https://luminousmen.com/post/8">senior</a>)</li>
<li><a class="reference external" href="https://github.com/checkcheckzz/system-design-interview">System design&nbsp;interview</a></li>
<li><a class="reference external" href="https://docs.python.org/3.8/reference/index.html">The Python Language&nbsp;Reference</a></li>
<li><a class="reference external" href="http://www.postgresqltutorial.com/">PostgreSQL&nbsp;Tutorial</a></li>
</ul>
</div>

            </div><!-- /.entry-content -->
            <div class="comments">
              <h5>Comments</h5>
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                var disqus_shortname = 'https-blog-pilosus-org';
                var disqus_identifier = 'posts/2019/12/08/python-interview-questions-ru/';
                var disqus_url = 'https://blog.pilosus.org/posts/2019/12/08/python-interview-questions-ru/';
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//https-blog-pilosus-org.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
              <noscript>Please enable JavaScript to view the comments.</noscript>
            </div>

          </article>
        </section>
      </div>

      <div class="navbar-spacer"></div>
      <section class="extras">
        <ul class="navbar-list">
          <li class="navbar-item"><a class="navbar-link" href="https://pilosus.org/">Home Page</a></li>
          <li class="navbar-item"><a class="navbar-link" href="https://keybase.io/pilosus">Keybase</a></li>
          <li class="navbar-item"><a class="navbar-link" href="/sitemap.xml">Sitemap</a></li>
        </ul>

        <ul class="navbar-list">
          <li class="navbar-item"><a class="navbar-link" href="https://blog.pilosus.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

          <li class="navbar-item"><a class="navbar-link" href="https://github.com/pilosus">GitHub</a></li>
          <li class="navbar-item"><a class="navbar-link" href="https://www.linkedin.com/in/vitaly-samigullin-05027233/">LinkedIn</a></li>
        </ul>
      </section><!-- /#extras -->

      <footer class="footer-pelican">
        <address id="about" class="vcard body">
          Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>. Theme: <a href="http://github.com/pilosus/pilosus-pelican-theme/">Pilosus Pelican</a>
        </address><!-- /#about -->
      </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-140765245-1', 'auto');
    ga('send', 'pageview');
    </script>
<script type="text/javascript">
    var disqus_shortname = 'https-blog-pilosus-org';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    </div>
  </body>
</html>