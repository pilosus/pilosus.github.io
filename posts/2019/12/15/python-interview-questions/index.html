<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Python interview questions and answers</title>

    <!-- Mobile Specific Metas –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Open Graph Metas –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta property="og:title" content="Python interview questions and answers" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://blog.pilosus.org/theme/images/og_image_default.png" />
    <meta property="og:url" content="https://blog.pilosus.org/posts/2019/12/15/python-interview-questions/" />
    <meta property="og:description" content="Python questions and answers for a technical interview" />
    <meta property="og:locale" content="" />
    <meta property="og:site_name" content="Vitaly&#39;s Technical Blog" />
    <meta property="article:published_time" content="2019-12-15" />
    <meta property="article:section" content="Blog" />
    <meta property="article:tag" content="python" />
    <meta property="article:tag" content="interview" />


    <!-- FONT –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600&amp;subset=cyrillic" rel="stylesheet" type="text/css">

    <!-- CSS –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="https://blog.pilosus.org/theme/css/normalize.css" />
    <link rel="stylesheet" href="https://blog.pilosus.org/theme/css/skeleton.css" />
    <link rel="stylesheet" href="https://blog.pilosus.org/theme/css/custom.css" />
    <link rel="stylesheet" href="https://blog.pilosus.org/theme/css/pygment.css" />

    <!-- Favicon –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="icon" type="image/png" href="https://blog.pilosus.org/theme/images/favicon.png">

    <!-- Feeds –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href="https://blog.pilosus.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Vitaly's Technical Blog Atom Feed" />
  </head>

  <!-- Primary Page Layout  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <body id="index" class="home">
    <div class="container">

      <section class="header">
	<div class="row">
	  <div class="two columns">
	    <img class="header-img u-full-width" alt="Vitaly Samigullin" src="/images/avatar.png">
	  </div>
	  <div class="ten columns">
	    <h2 class="title"><a class="header-link" href="https://blog.pilosus.org/">Vitaly's Technical Blog </a></h2>
	  </div>
	</div>
      </section>

      <div class="navbar-spacer"></div>
      <nav class="navbar">
	<div class="container">
          <ul class="navbar-list">
	    
            <li class="navbar-item"><a  class="navbar-link" href="https://blog.pilosus.org/pages/contact/">Contact</a></li>
            <li class="navbar-item"><a  class="navbar-link" href="https://blog.pilosus.org/pages/subscribe/">Subscribe</a></li>
            <li class="navbar-item"><a  class="navbar-link hl" href="https://blog.pilosus.org/category/blog/">Blog</a></li>
          </ul>
	</div>
      </nav>

      <div class="search">
        <form id="search-google" name="searchForm" action="https://google.com/search">
          <div class="row">
            <div class="ten columns">
	      <input class="u-full-width" name="q" type="text" placeholder="Keyword..." maxlength="200" />
	      <input name="q" type="hidden" value="site:https://blog.pilosus.org"/>
            </div>
            <div class="two columns">
	      <input class="button u-full-width" name="submit" type="submit" value="Search" />
            </div>
          </div>
        </form>
      </div>
      
      <div class="content">
        <section id="content" class="body">
          <article class="post-entry">
            <header class="post-header">
              <h4 class="post-title">
                <a href="https://blog.pilosus.org/posts/2019/12/15/python-interview-questions/" rel="bookmark"
                   title="Permalink to Python interview questions and answers">Python interview questions and&nbsp;answers</a></h4>
            </header>

            <div class="entry-content">
              <div class="post-info">
                <span class="published" title="2019-12-15T14:00:00+03:00">
                  15-12-2019 14:00
                </span>
                |
                <span class="vcard author">
                  by                   <a class="url fn" href="https://blog.pilosus.org/">Vitaly Samigullin</a>
                </span>
                |
                <span>in <a href="https://blog.pilosus.org/category/blog/">Blog</a></span>
		|
		<span class="word-count">3959 words</span>
		|
		<span class="word-count">16 min to read</span>
<br/><span>tags: <a href="https://blog.pilosus.org/tag/python/">python</a> <a href="https://blog.pilosus.org/tag/interview/">interview</a> </span>                
              </div><!-- /.post-info -->              <p>Although the questions you find in this blog post are universal, they
are crafted for a technical interview for a web developer&nbsp;position.</p>
<p>The questions have been tested in real life: I used them in more
than 35 interview sessions. They allowed my team and me to hire three
brilliant developers: a junior developer (ex-Yandex), a middle
developer (ex-Yandex), and a senior&nbsp;one.</p>
<p>The questions have also been reviewed by my peers and got positive
feedback. Some of my colleagues use these questions in their technical
interviews. I also use the questions when consulting people about
preparing for the interview or getting their first software&nbsp;job.</p>
<p>The questions are not unique. I&#8217;m not revealing any professional
secrets by posting them. The single most valuable thing about these
questions is the principle they are combined in an interview
session. You can also use these questions to come up with your
questions for the Python interview as an interviewer. Also, you can
use them to prepare for an interview as an&nbsp;interviewee.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of&nbsp;Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a><ul>
<li><a class="reference internal" href="#premises" id="id3">Premises</a></li>
<li><a class="reference internal" href="#candidates-cvs" id="id4">Candidates <span class="amp">&amp;</span>&nbsp;CVs</a></li>
<li><a class="reference internal" href="#non-technical-questions" id="id5">Non-technical&nbsp;questions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-questions" id="id6">Python questions</a><ul>
<li><a class="reference internal" href="#how-language-evolves" id="id7">How language&nbsp;evolves</a></li>
<li><a class="reference internal" href="#basic-types-and-data-structures-in-python" id="id8">Basic types and data structures in&nbsp;Python</a></li>
<li><a class="reference internal" href="#function-default-arguments" id="id9">Function default&nbsp;arguments</a></li>
<li><a class="reference internal" href="#what-s-decorator" id="id10">What&#8217;s&nbsp;decorator?</a></li>
<li><a class="reference internal" href="#decorator-that-prints-function-execution-time" id="id11">Decorator that prints function execution&nbsp;time</a></li>
<li><a class="reference internal" href="#using-decorator" id="id12">Using&nbsp;decorator</a></li>
<li><a class="reference internal" href="#decorated-function-s-name" id="id13">Decorated function&#8217;s&nbsp;name</a></li>
<li><a class="reference internal" href="#decorators-for-generators" id="id14">Decorators for&nbsp;generators</a></li>
<li><a class="reference internal" href="#decorator-with-arguments" id="id15">Decorator with&nbsp;arguments</a></li>
<li><a class="reference internal" href="#class-variables" id="id16">Class&nbsp;variables</a></li>
<li><a class="reference internal" href="#list-slices" id="id17">List&nbsp;slices</a></li>
<li><a class="reference internal" href="#what-s-list-dict-comprehension" id="id18">What&#8217;s list/dict&nbsp;comprehension?</a></li>
<li><a class="reference internal" href="#generator-expressions" id="id19">Generator&nbsp;expressions</a></li>
<li><a class="reference internal" href="#what-useful-functions-from-functools-do-you-know" id="id20">What useful functions from functools do you&nbsp;know?</a></li>
<li><a class="reference internal" href="#asyncio-multithreading-multiprocessing" id="id21">Asyncio, multithreading,&nbsp;multiprocessing</a></li>
<li><a class="reference internal" href="#python-ecosystem" id="id22">Python&nbsp;ecosystem</a></li>
</ul>
</li>
<li><a class="reference internal" href="#computer-science-questions" id="id23">Computer science questions</a><ul>
<li><a class="reference internal" href="#time-complexity" id="id24">Time&nbsp;complexity</a></li>
<li><a class="reference internal" href="#balanced-brackets-in-a-lisp-program-problem" id="id25">Balanced brackets in a Lisp-program&nbsp;problem</a></li>
</ul>
</li>
<li><a class="reference internal" href="#databases" id="id26">Databases</a><ul>
<li><a class="reference internal" href="#why-rdbms" id="id27">Why <span class="caps">RDBMS</span>?</a></li>
<li><a class="reference internal" href="#mysql-postgresql-queries" id="id28">MySQL/PostgreSQL&nbsp;queries</a></li>
<li><a class="reference internal" href="#nosql-overview" id="id29">NoSQL&nbsp;Overview</a></li>
<li><a class="reference internal" href="#redis-overview" id="id30">Redis&nbsp;Overview</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing" id="id31">Testing</a><ul>
<li><a class="reference internal" href="#unit-testing-overview" id="id32">Unit-testing&nbsp;overview</a></li>
<li><a class="reference internal" href="#how-do-you-test-a-function-that-changes-data-in-mysql" id="id33">How do you test a function that changes data in&nbsp;MySQL?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#devops-sysadmin-skills" id="id34">DevOps/SysAdmin skills</a><ul>
<li><a class="reference internal" href="#broken-response-from-google-com" id="id35">Broken response from&nbsp;google.com</a></li>
<li><a class="reference internal" href="#ip-addresses-top-from-nginx-log" id="id36"><span class="caps">IP</span> addresses top from Nginx&nbsp;log</a></li>
<li><a class="reference internal" href="#docker" id="id37">Docker</a></li>
</ul>
</li>
<li><a class="reference internal" href="#system-design-and-architecture" id="id38">System Design and Architecture</a><ul>
<li><a class="reference internal" href="#system-design-of-pastebin-like-service" id="id39">System design of pastebin-like service</a><ul>
<li><a class="reference internal" href="#user-story-business-description" id="id40">User story (business&nbsp;description)</a></li>
<li><a class="reference internal" href="#assume" id="id41">Assume</a></li>
<li><a class="reference internal" href="#hints" id="id42">Hints</a></li>
<li><a class="reference internal" href="#capacity-planning-for-3-years" id="id43">Capacity planning for 3&nbsp;years</a></li>
<li><a class="reference internal" href="#service-architecture" id="id44">Service&nbsp;architecture</a></li>
<li><a class="reference internal" href="#write-api" id="id45">Write <span class="caps">API</span></a></li>
<li><a class="reference internal" href="#unique-url-path-generation" id="id46">Unique <span class="caps">URL</span> path&nbsp;generation</a></li>
<li><a class="reference internal" href="#request-write-api" id="id47">Request Write <span class="caps">API</span></a></li>
<li><a class="reference internal" href="#write-api-response" id="id48">Write <span class="caps">API</span>&nbsp;Response</a></li>
<li><a class="reference internal" href="#request-read-api" id="id49">Request Read <span class="caps">API</span></a></li>
<li><a class="reference internal" href="#read-api-reponse" id="id50">Read <span class="caps">API</span>&nbsp;Reponse</a></li>
<li><a class="reference internal" href="#statistics" id="id51">Statistics</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#sources-and-useful-links" id="id52">Sources and useful&nbsp;links</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a></h2>
<div class="section" id="premises">
<h3><a class="toc-backref" href="#id3">Premises</a></h3>
<ul class="simple">
<li>Software development is no longer an art, nor a lifelong quest, but
rather an everyday office job, though highly-skilled one. That&#8217;s why
a candidate&#8217;s abilities for teamwork, coping with chores are super
important. But pure computer science, algorithms are in the
background, whether you like it or&nbsp;not.</li>
<li>An algorithm-based technical interview is an analogue of <span class="caps">IQ</span>-tests
that have been invented in the early <span class="caps">XX</span> century in the <span class="caps">US</span> for a
quick military recruits categorization. <span class="caps">IQ</span> provides some insights
about human intelligence but also has its flaws. Demonstrated
algorithm skill also provides an insight about candidate&#8217;s
intelligence but also has its flaws. Algorithm-based technical
interviews are used by corporations to quickly process a huge queue
of candidates, hire the ones they need and evaluate their grades and
salary. Corporations everybody wants to work for can afford a false
negative in hiring, i.e. not hiring the right person, as many
candidates compete to be hired by these companies. If you are not
one of these companies, then <strong>you</strong> compete with other companies
for the candidates. So don&#8217;t pretend to be a Google if you are not&nbsp;Google.</li>
<li>Human intelligence neither is an &#8220;on/off&#8221;, nor a range. Rather,
intelligence is a swiss army knife, a multitool. It may contain an
excellent sharp blade for everyday chores, it may also have a
screwdriver that merely works, and it may also have a corkscrew that
you actually don&#8217;t need at all. Can we evaluate an overall score for
such a multitool? Sure. But why would we? Unless you are Google,
find a multitool with the blades and bits that solve your exact
problems, not the abstract&nbsp;ones.</li>
<li>You need an interview to find out three things: a) why the candidate
has left (or are ready to leave) his/her previous (current) job; b)
what is he/she looking for at the new company; c) what value can
he/she bring to your&nbsp;team?</li>
<li>Hiring error can be mitigated by the probationary period. Take it
seriously. Set some goals (tasks) for probation. The same for the
candidate: during probation decide if the company is the right
choice. But hiring error is still an error that costs your company
money and time. You should do your best to avoid this error. The
same for the candidate. That&#8217;s why you never tell lies about your
project and team in the interview. Still, there&#8217;s nothing wrong with
presenting your project positively. Actually, it&#8217;s your duty if you
want to hire someone in a highly competitive job&nbsp;market.</li>
<li>There are no two identical interviews even for the same grade. The
technical interview is always improvisation. It&#8217;s an attempt to
reveal a candidate&#8217;s boundaries of competence, strengths and
weaknesses in a short period of&nbsp;time.</li>
</ul>
</div>
<div class="section" id="candidates-cvs">
<h3><a class="toc-backref" href="#id4">Candidates <span class="amp">&amp;</span>&nbsp;CVs</a></h3>
<ul class="simple">
<li>Not everybody is a <span class="caps">CV</span>-ninja.&nbsp;Really</li>
<li>Too high salary expectations isn&#8217;t a reason to reject a
candidate <span class="caps">CV</span>. You always can ask questions that will either lower
the expectations or prove you are interviewing a&nbsp;genius.</li>
<li>(sarcasm mode on) Of course, an interviewer always knows best!
(sarcasm mode off) But there are no solid grounds for reject
candidate CVs with grammar mistakes or expressions of inexperience or
quirks in their CVs. Asking inadequately complex questions is also
not a good idea. The interview is not about you, it&#8217;s about the&nbsp;candidate.</li>
<li>Don&#8217;t afraid of people with some irrelevant background,
e.g. designers, analysts, etc., who changed his/her profession to a
technical one. Be honest, your boring <span class="caps">REST</span> <span class="caps">API</span> doesn&#8217;t require a
university graduate&nbsp;program.</li>
<li>A candidate&#8217;s technology stack may not be 100% yours. Still, he/she
may be a good match for your team. Should you hire someone with 3+
years of experience with Flask but no Django experience for your
Django project? Probably you&nbsp;should.</li>
<li>The only way to hire someone quickly is to do as many interviews as
you&nbsp;can.</li>
<li>Average interview time for an interviewer is about 2.5 hours (skim
over the CVs, prepare for the interview, the interview itself,
discussion with an <span class="caps">HR</span> specialist and a <span class="caps">CTO</span>)</li>
<li>Don&#8217;t make a technical interview for too long. 2 hour is enough. 1.5
hours is&nbsp;optimal.</li>
<li>Three interviews a week is a good pace. More than 3 is too much for
the interviewer and his/her team. Less than 3 makes your search&nbsp;longer.</li>
<li>Average time for hiring a Python developer depends on the project,
expected experience and your offer conditions. As a rule of thumb, 3
months from submitting an open position to <span class="caps">HR</span> department to the
first working day is&nbsp;okay.</li>
<li>Not every software engineer is an introvert. There are people with
outstanding &#8220;selling&#8221; skills who are prepared for typical interview
questions, present themselves, but still lack solid knowledge of
software development. Don&#8217;t let them trick you! Ask whiteboard
programming&nbsp;questions!</li>
</ul>
</div>
<div class="section" id="non-technical-questions">
<h3><a class="toc-backref" href="#id5">Non-technical&nbsp;questions</a></h3>
<ul class="simple">
<li>What have you done in your previous/current&nbsp;project?</li>
<li>Describe your team line-up (frontend/backend developers, <span class="caps">QA</span>
engineers, <span class="caps">SRE</span>/DevOps/SysAdmins, product/project managers,&nbsp;etc)?</li>
<li>How planning, code review, etc. are organized in your project? What
you liked and disliked about&nbsp;it?</li>
<li>Why did you decice to leave (have already left) the&nbsp;project?</li>
<li>What do you expect from the new project (things to develop, processes,&nbsp;etc)?</li>
</ul>
</div>
</div>
<div class="section" id="python-questions">
<h2><a class="toc-backref" href="#id6">Python&nbsp;questions</a></h2>
<div class="section" id="how-language-evolves">
<h3><a class="toc-backref" href="#id7">How language&nbsp;evolves</a></h3>
<ul class="simple">
<li>What&#8217;s new in the latest Python version? (<a class="reference external" href="https://docs.python.org/3/whatsnew/3.8.html">Python 3.8</a> at the moment of&nbsp;writing)</li>
<li>How Python 3+ differs from Python 2.7? (<a class="reference external" href="https://docs.python.org/3.0/whatsnew/3.0.html">What&#8217;s new in Python 3</a>)</li>
<li>What new syntax has been introduced since Python 2.7? (minimal expectations: asyncio, type&nbsp;hinting)</li>
</ul>
</div>
<div class="section" id="basic-types-and-data-structures-in-python">
<h3><a class="toc-backref" href="#id8">Basic types and data structures in&nbsp;Python</a></h3>
<ul class="simple">
<li>What are the basic types in&nbsp;Python?</li>
<li>What are the basic data structures in&nbsp;Python?</li>
<li>All data types and structures in Python can be divided into two groups. Name these groups (mutable,&nbsp;immutable)</li>
</ul>
<p>Problem. What lines of the following code raise exceptions? What&nbsp;expectations?</p>
<div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">d</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">d</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">3</span>       <span class="c1"># TypeError: unhashable type: &#39;list&#39;</span>
<span class="n">d</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])]</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1"># TypeError: unhashable type: &#39;list&#39;</span>
</pre></div>
</div>
<div class="section" id="function-default-arguments">
<h3><a class="toc-backref" href="#id9">Function default&nbsp;arguments</a></h3>
<p>Problem. We have got a&nbsp;function:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fun_default</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">lst</span><span class="p">:</span> <span class="nb">list</span><span class="o">=</span><span class="p">[])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lst</span>
</pre></div>
<p>What the following print statements will print after the block of assignments is&nbsp;executed?</p>
<div class="highlight"><pre><span></span><span class="n">l1</span> <span class="o">=</span> <span class="n">fun_default</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">fun_default</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[])</span>
<span class="n">l3</span> <span class="o">=</span> <span class="n">fun_default</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">l1</span><span class="p">)</span> <span class="c1"># [1, 3]</span>
<span class="k">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span> <span class="c1"># [2]</span>
<span class="k">print</span><span class="p">(</span><span class="n">l3</span><span class="p">)</span> <span class="c1"># [1, 3]</span>
</pre></div>
<p>How would you fix the function so that print statements print [1], [2], [3]&nbsp;respectively?</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fun_default_fixed</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">lst</span><span class="p">:</span> <span class="nb">list</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">lst</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lst</span>
</pre></div>
</div>
<div class="section" id="what-s-decorator">
<h3><a class="toc-backref" href="#id10">What&#8217;s&nbsp;decorator?</a></h3>
<ul class="simple">
<li>What&#8217;s&nbsp;decorator?</li>
<li>What decorators from the standard library you&nbsp;know?</li>
<li>Tell about <a class="reference external" href="https://docs.python.org/3.7/howto/descriptor.html">descriptor protocol</a> (complex&nbsp;question)</li>
</ul>
</div>
<div class="section" id="decorator-that-prints-function-execution-time">
<h3><a class="toc-backref" href="#id11">Decorator that prints function execution&nbsp;time</a></h3>
<p>We have got a function that queries a database. We want each function
call to print time of its execution. Implement it with a decorator.
Assume: decorated function may have any number of positional or
keyword&nbsp;arguments.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">measure</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wrapper function&quot;&quot;&quot;</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>
</div>
<div class="section" id="using-decorator">
<h3><a class="toc-backref" href="#id12">Using&nbsp;decorator</a></h3>
<p>How do you apply your decorator to a function <cite>fun</cite> using syntactic
sugar and without&nbsp;it?</p>
<div class="highlight"><pre><span></span><span class="c1"># with syntactic sugar</span>
<span class="nd">@measure</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># sugar free</span>
<span class="n">fun</span> <span class="o">=</span> <span class="n">measure</span><span class="p">(</span><span class="n">fun</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">fun</span><span class="p">)</span> <span class="c1"># function</span>
</pre></div>
</div>
<div class="section" id="decorated-function-s-name">
<h3><a class="toc-backref" href="#id13">Decorated function&#8217;s&nbsp;name</a></h3>
<p>What is function <cite>docstring</cite> and <cite>name</cite> after decorator is&nbsp;applied?</p>
<div class="highlight"><pre><span></span><span class="n">fun</span><span class="o">.</span><span class="vm">__name__</span>  <span class="c1"># &#39;wrapper&#39;</span>
<span class="n">fun</span><span class="o">.</span><span class="vm">__doc__</span>  <span class="c1"># &#39;Wrapper function&#39;</span>
</pre></div>
<p>How do you return the original name and docstring to the decorated&nbsp;function?</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">measure</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wrapper function&quot;&quot;&quot;</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@measure</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;My func&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="n">fun</span><span class="o">.</span><span class="vm">__name__</span>  <span class="c1"># &#39;fun&#39;</span>
<span class="n">fun</span><span class="o">.</span><span class="vm">__doc__</span>   <span class="c1"># &#39;My func&#39;</span>
</pre></div>
<p>How would you do that without <cite>functools.wraps</cite>?</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">measure</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wrapper function&quot;&quot;&quot;</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="n">wrapper</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span>
    <span class="n">wrapper</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>
</div>
<div class="section" id="decorators-for-generators">
<h3><a class="toc-backref" href="#id14">Decorators for&nbsp;generators</a></h3>
<p>What time do we get if we decorate a generator function like the&nbsp;following?</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Any</span>

<span class="k">def</span> <span class="nf">fun_gen</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
          <span class="k">yield</span> <span class="n">i</span>
</pre></div>
<p>Why time we see is so small? How would you measure the real time of
iteration over the whole&nbsp;generator?</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Any</span>

<span class="k">def</span> <span class="nf">measure_gen</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">yield from</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@measure_gen</span>
<span class="k">def</span> <span class="nf">fun_gen</span><span class="p">(</span><span class="n">l</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">i</span>
</pre></div>
</div>
<div class="section" id="decorator-with-arguments">
<h3><a class="toc-backref" href="#id15">Decorator with&nbsp;arguments</a></h3>
<p>Rewrite the decorator from the previous question so that it could take
in an argument for a limit. Execution time is printed if it exceeds
the&nbsp;limit.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">measure</span><span class="p">(</span><span class="n">limit</span><span class="p">):</span>
    <span class="c1"># Don&#39;t forget to set limit when decorating a function!</span>
    <span class="k">def</span> <span class="nf">outer_wrapper</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">inner_wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">after</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

            <span class="n">elapsed</span> <span class="o">=</span> <span class="n">after</span> <span class="o">-</span> <span class="n">before</span>
            <span class="k">if</span> <span class="n">elapsed</span> <span class="o">&gt;</span> <span class="n">limit</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Time elapsed: {after - before} seconds&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">inner_wrapper</span>
    <span class="k">return</span> <span class="n">outer_wrapper</span>
</pre></div>
<p>How do we decorate a function using syntactic sugar and without&nbsp;it?</p>
<div class="highlight"><pre><span></span><span class="n">new_measure</span> <span class="o">=</span> <span class="n">measure</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">fun</span> <span class="o">=</span> <span class="n">new_measure</span><span class="p">(</span><span class="n">fun</span><span class="p">)</span>
<span class="n">fun</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

<span class="c1"># sugar free</span>
<span class="n">new_measure</span> <span class="o">=</span> <span class="n">measure</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">fun</span> <span class="o">=</span> <span class="n">new_measure</span><span class="p">(</span><span class="n">fun</span><span class="p">)</span>
<span class="n">fun</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<div class="section" id="class-variables">
<h3><a class="toc-backref" href="#id16">Class&nbsp;variables</a></h3>
<p>What&#8217;s a class&nbsp;variable?</p>
<p>Problem.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">class</span> <span class="nc">Child1</span><span class="p">(</span><span class="n">Parent</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Child2</span><span class="p">(</span><span class="n">Parent</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
<p>What will the following print statements&nbsp;print?</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">Parent</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># 1 1 1</span>

<span class="n">Child1</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">print</span><span class="p">(</span><span class="n">Parent</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># 1 2 1</span>

<span class="n">Parent</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">print</span><span class="p">(</span><span class="n">Parent</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Child2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># 3 2 3</span>
</pre></div>
</div>
<div class="section" id="list-slices">
<h3><a class="toc-backref" href="#id17">List&nbsp;slices</a></h3>
<p>Problem. What are the results of this code block&nbsp;execution?</p>
<div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># [2]</span>
<span class="n">l</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># [1, 2, 3, 4]</span>
<span class="n">l</span><span class="p">[</span><span class="mi">10</span><span class="p">:]</span>  <span class="c1"># []</span>
<span class="n">l</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>   <span class="c1"># IndexError</span>
</pre></div>
</div>
<div class="section" id="what-s-list-dict-comprehension">
<h3><a class="toc-backref" href="#id18">What&#8217;s list/dict&nbsp;comprehension?</a></h3>
<p>Implement a list of even numbers in a range [0, 10) to the power 2
using list&nbsp;comprehension.</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
<p>Implement the same using map and&nbsp;filter.</p>
<div class="highlight"><pre><span></span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
</pre></div>
</div>
<div class="section" id="generator-expressions">
<h3><a class="toc-backref" href="#id19">Generator&nbsp;expressions</a></h3>
<p>What&#8217;s the easiest way to turn the above list comprehension into a
generator (generator&nbsp;expression)?</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="what-useful-functions-from-functools-do-you-know">
<h3><a class="toc-backref" href="#id20">What useful functions from functools do you&nbsp;know?</a></h3>
<p>The question may be a follow-up for decorator questions and
<cite>functools.wraps</cite>. functools is a great module with loads of useful
things. What would be great to hear from the candidate is something
like <cite>reduce</cite> and <cite>partial</cite>.</p>
</div>
<div class="section" id="asyncio-multithreading-multiprocessing">
<h3><a class="toc-backref" href="#id21">Asyncio, multithreading,&nbsp;multiprocessing</a></h3>
<ul class="simple">
<li>What&#8217;s the difference between a process and a&nbsp;thread?</li>
<li>Problem. We have got a list of 1000 URLs, we have to iterate over it
and make <span class="caps">GET</span> requests. How would you do that? (<span class="caps">IO</span>-bound tasks -&gt;
asyncio, Tornado etc или&nbsp;multithreading)</li>
<li>Problem. We have got 1000 video files than should be rendered
somehow using Python. How would you do that? (<span class="caps">CPU</span>-bound tasks -&gt;&nbsp;multiprocessing)</li>
<li>Give an overview of <cite>asyncio</cite> or similar libraries for asynchronous
programming. How does it work? (huge question, expectations are
covered in <a class="reference external" href="https://trio.readthedocs.io/en/latest/tutorial.html">Trio tutorial</a>)</li>
</ul>
</div>
<div class="section" id="python-ecosystem">
<h3><a class="toc-backref" href="#id22">Python&nbsp;ecosystem</a></h3>
<ul class="simple">
<li>What do you use for background tasks in a Python project? (<cite>celery</cite>)</li>
<li>How do you pack your Python code? (<cite>wheels</cite>, <cite>eggs</cite>, what&#8217;s the&nbsp;difference?)</li>
<li>How do you document your Python project? (<cite>sphinx-doc</cite>)</li>
<li>What do you use for <span class="caps">REST</span> <span class="caps">API</span> documenting? (<cite>swagger</cite>)</li>
<li>What <span class="caps">ORM</span> do you use? (<cite>SQLAlchemy</cite>, <cite>Django <span class="caps">ORM</span></cite>)</li>
<li>What static analysis tools and linters for Python code do you use?
(<cite>mypy</cite>, <cite>flake8</cite>)</li>
<li>What web frameworks do you use? (<cite>Flask</cite>, <cite>Django</cite>, <cite>aiohttp</cite>,
<cite>sanic</cite>,&nbsp;etc.)</li>
<li>What package management tools do you use? (<cite>pip</cite>, <cite>pipenv</cite>,
<cite>poetry</cite>,&nbsp;etc.)</li>
</ul>
</div>
</div>
<div class="section" id="computer-science-questions">
<h2><a class="toc-backref" href="#id23">Computer science&nbsp;questions</a></h2>
<div class="section" id="time-complexity">
<h3><a class="toc-backref" href="#id24">Time&nbsp;complexity</a></h3>
<ul class="simple">
<li>What&#8217;s time&nbsp;complexity?</li>
<li>What&#8217;s Big&nbsp;O?</li>
<li>What&#8217;s time complexity for the following&nbsp;algorithm?</li>
</ul>
<div class="highlight"><pre><span></span><span class="c1"># O(n^2)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">n</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">n</span><span class="p">:</span>
         <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
<p>What&#8217;s time complexity for each of these&nbsp;statements?</p>
<div class="highlight"><pre><span></span><span class="n">x</span> <span class="ow">in</span><span class="o">/</span><span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span> <span class="c1"># where type(s) is list/tuple # O(n)</span>
<span class="n">x</span> <span class="ow">in</span><span class="o">/</span><span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span> <span class="c1"># where type(s) is set        # O(1)</span>
<span class="nb">list</span><span class="o">.</span><span class="n">append</span><span class="p">()</span>                               <span class="c1"># O(1)</span>
<span class="nb">list</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>                               <span class="c1"># O(n)</span>
<span class="nb">list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>                                 <span class="c1"># O(1)</span>
<span class="nb">list</span><span class="o">.</span><span class="n">sort</span>                                   <span class="c1"># O(n log n)</span>
</pre></div>
<p>Check out other data structures <a class="reference external" href="https://wiki.python.org/moin/TimeComplexity">time complexity</a> if&nbsp;needed.</p>
</div>
<div class="section" id="balanced-brackets-in-a-lisp-program-problem">
<h3><a class="toc-backref" href="#id25">Balanced brackets in a Lisp-program&nbsp;problem</a></h3>
<p>Problem. I like to code in Racket, which is a Lisp dialect that uses a
<a class="reference external" href="https://blog.pilosus.org/images/git-the-princess.png">lot of brackets</a>.  Implement a Python function that takes in text
and returns <cite>True</cite> if brackets in the text are balanced, and returns
<cite>False</cite> otherwise.</p>
<p>Examples of balanced&nbsp;brackets:</p>
<div class="highlight"><pre><span></span><span class="s2">&quot;()&quot;</span>
<span class="s2">&quot;(())&quot;</span>
<span class="s2">&quot;(custom-set-variables &#39;(inhibit-startup-screen t) &#39;(package-selected-packages (quote</span>
<span class="p">(</span><span class="n">sql</span><span class="o">-</span><span class="n">indent</span> <span class="n">magit</span> <span class="n">dockerfile</span><span class="o">-</span><span class="n">mode</span> <span class="n">yaml</span><span class="o">-</span><span class="n">mode</span> <span class="n">gitlab</span> <span class="n">markdown</span><span class="o">-</span><span class="n">mode</span> <span class="n">lorem</span><span class="o">-</span><span class="n">ipsum</span> <span class="n">jedi</span>
<span class="n">elpy</span> <span class="n">anaconda</span><span class="o">-</span><span class="n">mode</span> <span class="n">afternoon</span><span class="o">-</span><span class="n">theme</span><span class="p">))))</span><span class="s2">&quot;</span>
<span class="s2">&quot;(hello [world {!}])&quot;</span>
</pre></div>
<p>Examples of unbalanced&nbsp;brackets:</p>
<div class="highlight"><pre><span></span><span class="s2">&quot;(&quot;</span>
<span class="s2">&quot;)(&quot;</span>
<span class="s2">&quot;())&quot;</span>
<span class="s2">&quot;({))&quot;</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">balance</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Return True if string&#39;s parentheses are balanced, False otherwise</span>

<span class="sd">  &gt;&gt;&gt; balance(&quot;&quot;)</span>
<span class="sd">  True</span>
<span class="sd">  &gt;&gt;&gt; balance(&quot;(())&quot;)</span>
<span class="sd">  True</span>
<span class="sd">  &gt;&gt;&gt; balance(&quot;))((&quot;)</span>
<span class="sd">  False</span>
<span class="sd">  &gt;&gt;&gt; balance(&quot;()()(())(()())&quot;)</span>
<span class="sd">  True</span>
<span class="sd">  &gt;&gt;&gt; balance(&quot;(]&quot;)</span>
<span class="sd">  False</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">opening</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">}</span>
  <span class="n">closing</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">}</span>
  <span class="n">mapping</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">opening</span><span class="p">,</span> <span class="n">closing</span><span class="p">))</span>
  <span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">opening</span><span class="p">:</span>
          <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mapping</span><span class="p">[</span><span class="n">ch</span><span class="p">])</span>
      <span class="k">elif</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">closing</span><span class="p">:</span>
          <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">stack</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">ch</span> <span class="o">!=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()):</span>
              <span class="k">return</span> <span class="bp">False</span>
  <span class="k">return</span> <span class="ow">not</span> <span class="n">stack</span>
</pre></div>
<p>If needed the function can be simplified to check only for round&nbsp;brackets.</p>
</div>
</div>
<div class="section" id="databases">
<h2><a class="toc-backref" href="#id26">Databases</a></h2>
<div class="section" id="why-rdbms">
<h3><a class="toc-backref" href="#id27">Why <span class="caps">RDBMS</span>?</a></h3>
<p>Problem. We are a startup with <span class="caps">CTO</span>, <span class="caps">CEO</span> and a couple of devs. We have
no admins yet. We are developing authentication service (users
registration, access rights, etc) in Python. Why do we need a
database? Why not using a simple text file? Python has all we need to
write to and read from a text file. We can just write user login and
password hash to the file when the user is signing up. And then we
read the credentials when the user is signing in in. It&#8217;s easy. It
doesn&#8217;t require database admin work. Why not a text&nbsp;file?</p>
<p>If needed, the question can be put this way: what mechanisms of a
relational database do you know, that are complex enough to implement,
but are necessary for our&nbsp;case?</p>
<p><span class="caps">DB</span> features that the candidate expected to&nbsp;mention:</p>
<ul class="simple">
<li>index</li>
<li>relations</li>
<li>transactions</li>
</ul>
<p>The candidate may be asked to elaborate on each of these features. For
example, you can ask him/her about&nbsp;indices:</p>
<ul class="simple">
<li>What&#8217;s time complexity for searching using the&nbsp;index?</li>
<li>Problem. In table <cite>candidates</cite> we have a <cite>is_interviewed</cite> column
with possible values 0 or 1. How adding an index for this column
will affect search&nbsp;performance?</li>
<li>What&#8217;s composite index (or multicolumn index)? What are the rules of
using composite&nbsp;index?</li>
</ul>
</div>
<div class="section" id="mysql-postgresql-queries">
<h3><a class="toc-backref" href="#id28">MySQL/PostgreSQL&nbsp;queries</a></h3>
<p>Problem. We have got service like iTunes where users can buy or rent a
video. This is a PostgreSQL database schema for the&nbsp;service:</p>
<div class="figure">
<a class="reference external image-reference" href="https://blog.pilosus.org/images/sql-tables.pdf"><img alt="PostgreSQL dababase schema for technical interview questions" class="responsive" src="https://blog.pilosus.org/images/sql-tables.jpg" /></a>
</div>
<p>Write a <span class="caps">SQL</span> query to select top-20 movies starring actor John Doe. The
query also&nbsp;selects:</p>
<ul class="simple">
<li>Movie&nbsp;title</li>
<li>Movie&nbsp;language</li>
<li>Movie release&nbsp;year</li>
</ul>
<p>Results should be ordered in descendant order by a release&nbsp;year.</p>
<p>(If help needed) use tables: <cite>film</cite>, <cite>language</cite>, <cite>film_actor</cite>, <cite>actor</cite></p>
<div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">f</span><span class="p">.</span><span class="n">title</span><span class="p">,</span> <span class="n">l</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">f</span><span class="p">.</span><span class="n">release_year</span>
<span class="k">FROM</span> <span class="n">film</span> <span class="k">AS</span> <span class="n">f</span>
<span class="k">JOIN</span> <span class="k">language</span> <span class="k">AS</span> <span class="n">l</span> <span class="k">ON</span> <span class="n">l</span><span class="p">.</span><span class="n">language_id</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">language_id</span>
<span class="k">JOIN</span> <span class="n">film_actor</span> <span class="k">AS</span> <span class="n">fa</span> <span class="k">ON</span> <span class="n">fa</span><span class="p">.</span><span class="n">film_id</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">film_id</span>
<span class="k">JOIN</span> <span class="n">actor</span> <span class="k">AS</span> <span class="n">a</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">actor_id</span> <span class="o">=</span> <span class="n">fa</span><span class="p">.</span><span class="n">actor_id</span>
<span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">first_name</span> <span class="o">=</span> <span class="s1">&#39;John&#39;</span> <span class="k">AND</span> <span class="n">a</span><span class="p">.</span><span class="n">last_name</span> <span class="o">=</span> <span class="s1">&#39;Doe&#39;</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">f</span><span class="p">.</span><span class="n">release_year</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">20</span><span class="p">;</span>
</pre></div>
<p>Write a <span class="caps">SQL</span> query to select top-10 customers who paid most, but not
less than 100. The query also&nbsp;selects:</p>
<ul class="simple">
<li>Customer&#8217;s <span class="caps">ID</span> and full&nbsp;name</li>
<li>Customer sum of&nbsp;payments</li>
</ul>
<p>(If help needed) use tables: <cite>payment</cite>, <cite>customer</cite></p>
<div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="k">c</span><span class="p">.</span><span class="n">customer_id</span><span class="p">,</span> <span class="k">c</span><span class="p">.</span><span class="n">first_name</span><span class="p">,</span> <span class="k">c</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">amount</span><span class="p">)</span> <span class="k">AS</span> <span class="n">money</span>
<span class="k">FROM</span> <span class="n">payment</span> <span class="k">AS</span> <span class="n">p</span>
<span class="k">JOIN</span> <span class="n">customer</span> <span class="k">AS</span> <span class="k">c</span> <span class="k">ON</span> <span class="k">c</span><span class="p">.</span><span class="n">customer_id</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">customer_id</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="k">c</span><span class="p">.</span><span class="n">customer_id</span>
<span class="k">HAVING</span> <span class="k">SUM</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">amount</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">100</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">money</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</pre></div>
</div>
<div class="section" id="nosql-overview">
<h3><a class="toc-backref" href="#id29">NoSQL&nbsp;Overview</a></h3>
<ul class="simple">
<li>What&#8217;s&nbsp;NoSQL?</li>
<li>What types of NoSQL do you&nbsp;know?</li>
<li>What NoSQL <span class="caps">DB</span> did you&nbsp;use?</li>
</ul>
<p>Minimal expected answer: NoSQL is a database for collections of
data. Data is denormalized, <span class="caps">JOIN</span> is not supported (usually implemented
in your&nbsp;app).</p>
<p>Types of NoSQL&nbsp;DBs:</p>
<ul class="simple">
<li>key-value store (hash table implementation: Redis,&nbsp;AeroSpike)</li>
<li>document-store (like key-value but with documents, e.g <span class="caps">JSON</span>, for
values:&nbsp;MongoDB)</li>
<li>wide column store (HBase,&nbsp;Cassandra)</li>
<li>graph database&nbsp;(Neo4j)</li>
</ul>
</div>
<div class="section" id="redis-overview">
<h3><a class="toc-backref" href="#id30">Redis&nbsp;Overview</a></h3>
<ul class="simple">
<li>What&#8217;s Redis is used&nbsp;for?</li>
<li>Why it&#8217;s so popular for caching&nbsp;layer?</li>
<li>How Redis is different from MySQL when it comes to data&nbsp;storage?</li>
<li>What happens if a machine that runs Redis server is&nbsp;rebooted?</li>
<li>What high availability mechanisms for Redis do you&nbsp;know?</li>
</ul>
<p>Expectations: Redis is an in-memory key-value <span class="caps">DB</span>. Data snapshot
mechanism can be used in Redis to dump data to the disk. Redis
Sentinel is a mechanism for high&nbsp;availability.</p>
</div>
</div>
<div class="section" id="testing">
<h2><a class="toc-backref" href="#id31">Testing</a></h2>
<div class="section" id="unit-testing-overview">
<h3><a class="toc-backref" href="#id32">Unit-testing&nbsp;overview</a></h3>
<ul class="simple">
<li>What&#8217;s&nbsp;unit-testing?</li>
<li>How it&#8217;s different from integration or functional&nbsp;testing?</li>
<li>What libraries did you use for testing in Python? (<cite>unittest</cite>,
<cite>pytest</cite>) How they are different from each&nbsp;other?</li>
<li>When you write a unit-test? (in the existing project, in the new
project, when fixing a bug, when implementing a new&nbsp;feature)</li>
</ul>
</div>
<div class="section" id="how-do-you-test-a-function-that-changes-data-in-mysql">
<h3><a class="toc-backref" href="#id33">How do you test a function that changes data in&nbsp;MySQL?</a></h3>
<p>Problem. We&#8217;ve got a function that executes a <cite><span class="caps">INSERT</span></cite> <span class="caps">SQL</span> query in
the test database. Other developers in your team use the same
database. We need to write a unittest for the function. But we don&#8217;t
want to change test <span class="caps">DB</span> on each test run. How do you do&nbsp;it?</p>
<ul class="simple">
<li>mock</li>
<li>transaction&nbsp;rollback</li>
</ul>
</div>
</div>
<div class="section" id="devops-sysadmin-skills">
<h2><a class="toc-backref" href="#id34">DevOps/SysAdmin&nbsp;skills</a></h2>
<div class="section" id="broken-response-from-google-com">
<h3><a class="toc-backref" href="#id35">Broken response from&nbsp;google.com</a></h3>
<p>Problem. When I open a browser, go to <cite>https://www.google.com</cite> and see
the raw response, it&#8217;s normal&nbsp;text.</p>
<p>Here I do a <span class="caps">GET</span> request using <cite>curl</cite>, but a response seems to be&nbsp;broken.</p>
<div class="highlight"><pre><span></span>&gt; GET / HTTP/2
&gt; Host: www.google.com
&gt; User-Agent: curl/7.58.0
&gt; Accept: */*
&gt; Accept-Encoding: gzip, deflate

%�j��~d+.K�W��me<span class="sb">`</span>�,x�x�m�G�67��<span class="sb">`</span><span class="nv">$#</span>������~<span class="o">{</span>d���<span class="o">]</span>�.<span class="err">&#39;</span>����
����Q���Mʥu���&lt;�O<span class="o">)</span>,�<span class="p">&amp;</span>�����,���E�.���_�
<span class="p">&amp;</span>�I<span class="se">\�</span>�p��#<span class="o">]</span>�,�����K+����p�vk
j���k<span class="s2">&quot;�fe�=�`�J4�I/��m6{�E���;3+�v�BT1T��(W��J��m�yO��</span>
<span class="s2">�j��</span>
</pre></div>
<p>Why is it&nbsp;so?</p>
<div class="highlight"><pre><span></span>curl -v <span class="s2">&quot;https://www.google.com&quot;</span> --header <span class="s2">&quot;Accept-Encoding: gzip, deflate&quot;</span> --output -
</pre></div>
</div>
<div class="section" id="ip-addresses-top-from-nginx-log">
<h3><a class="toc-backref" href="#id36"><span class="caps">IP</span> addresses top from Nginx&nbsp;log</a></h3>
<p>Problem. Our service is under high load because of DDoS-attack. It
makes hard for our legitimate customers to get a response from the
service. We want to ban <span class="caps">IP</span> addresses bots get used of. To do so we
want to make a top of <span class="caps">IP</span> addresses with the most requests. We ask our
admins to provide web server logs as a file <cite>nginx.log</cite>.</p>
<p>Using console <span class="caps">GNU</span> utils create a file with top <span class="caps">IP</span>-addresses with most
requests in descending order. Assume that <span class="caps">IP</span>-address is in 9th column
in the log, columns are separated by <cite>t</cite>.</p>
<div class="highlight"><pre><span></span>awk <span class="s1">&#39;{print $9}&#39;</span> nginx.log <span class="p">|</span> sort <span class="p">|</span> uniq -c <span class="p">|</span> awk <span class="s1">&#39;{print $1&quot;,&quot;$2}&#39;</span> <span class="p">|</span> sort -r -t, -nk1 &gt; bots.csv
</pre></div>
</div>
<div class="section" id="docker">
<h3><a class="toc-backref" href="#id37">Docker</a></h3>
<ul class="simple">
<li>What&#8217;s a docker&nbsp;container?</li>
<li>What&#8217;s the difference between docker and virtualbox or other virtual&nbsp;machines?</li>
<li>Why docker? We can just copy files to the real hardware&nbsp;machine</li>
<li>Why not using virtualenv instead of&nbsp;Docker?</li>
</ul>
</div>
</div>
<div class="section" id="system-design-and-architecture">
<h2><a class="toc-backref" href="#id38">System Design and&nbsp;Architecture</a></h2>
<p><strong>Parental advisory: highly opinionated content&nbsp;(35+)</strong></p>
<div class="section" id="system-design-of-pastebin-like-service">
<h3><a class="toc-backref" href="#id39">System design of pastebin-like&nbsp;service</a></h3>
<div class="section" id="user-story-business-description">
<h4><a class="toc-backref" href="#id40">User story (business&nbsp;description)</a></h4>
<ul class="simple">
<li>A user submits text&nbsp;(copypasta)</li>
<li>Text is saved, the user gets a unique <span class="caps">URL</span> (base serive <span class="caps">URL</span> + short&nbsp;path)</li>
<li>User goes to the <span class="caps">URL</span> and sees his/her original&nbsp;text</li>
<li>Text is stored until it&#8217;s&nbsp;expired</li>
<li>Service deletes expired&nbsp;texts</li>
<li>Once the text is expired, it&#8217;s not accessible anymore by its <span class="caps">URL</span></li>
<li>Service is operating under high&nbsp;load</li>
<li>A product owner needs monthly statistics for URLs&nbsp;visits</li>
</ul>
</div>
<div class="section" id="assume">
<h4><a class="toc-backref" href="#id41">Assume</a></h4>
<ul class="simple">
<li>Copypasta can be in text format&nbsp;only</li>
<li>The product owner doesn&#8217;t need realtime&nbsp;statistics</li>
<li>Service gets 10 million new copypastas a month (3.85 <span class="caps">RPS</span>)</li>
<li>Service has 100 million copypasta reads a month (38.5 <span class="caps">RPS</span>)</li>
<li>We need capacity planning (hardware planning) for 3&nbsp;years</li>
</ul>
</div>
<div class="section" id="hints">
<h4><a class="toc-backref" href="#id42">Hints</a></h4>
<ul class="simple">
<li>Average text size is&nbsp;1Kb</li>
<li>Short <span class="caps">URL</span> path takes 7 bytes in <span class="caps">DB</span></li>
<li><span class="caps">URL</span> expiry (or <span class="caps">TTL</span>) takes 4 bytes in <span class="caps">DB</span></li>
<li><span class="caps">URL</span> timestamp takes 5 bytes in <span class="caps">DB</span></li>
<li>File path to a copypasta takes 255 bytes in <span class="caps">DB</span></li>
<li>In total: 1.27 <span class="caps">KB</span> per copypasta or 1.27 Gb of copypasta a&nbsp;month</li>
</ul>
</div>
<div class="section" id="capacity-planning-for-3-years">
<h4><a class="toc-backref" href="#id43">Capacity planning for 3&nbsp;years</a></h4>
<ul class="simple">
<li>36 * 12.7 = 457 Gb of&nbsp;copypasta</li>
<li>36 * 10 = 360 million&nbsp;URLs</li>
</ul>
</div>
<div class="section" id="service-architecture">
<h4><a class="toc-backref" href="#id44">Service&nbsp;architecture</a></h4>
<div class="highlight"><pre><span></span>  Client
    |
    V
Load Balancer
    |
    V
 Web Server (Reverse Proxy, i.e. Nginx)
  |      |
  V      V
Write   Read                                Analytics (MapReduce)
API     API---------------------------       |         |
 |       |        |                  |       |         |
 |       V        |                  |       |         |
 |      Cache     |                  |       |         V
 ------------------------------      |       |       SQL for Analytics
 V                |            |     |       |
SQL-----------    |            V     V       V
 |_Master    |    |           Object (File) Store
 |_Slave     V    |
            SQL   V
 ^              Read-only Replica
 |
 |
Periodic Task
(remove expired)
</pre></div>
</div>
<div class="section" id="write-api">
<h4><a class="toc-backref" href="#id45">Write <span class="caps">API</span></a></h4>
<ol class="arabic simple">
<li>Generate a <span class="caps">URL</span>, check for unique constraint in <span class="caps">SQL</span></li>
<li>If the <span class="caps">URL</span> is unique, make an <span class="caps">INSERT</span> into <span class="caps">DB</span> table, otherwise go to&nbsp;1.</li>
</ol>
<div class="highlight"><pre><span></span><span class="n">shortlink</span> <span class="nb">char</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="n">expiration_in_minutes</span> <span class="nb">int</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="n">created_at</span> <span class="n">datetime</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="n">paste_path</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">shortlink</span><span class="p">)</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">shortlink_idx</span> <span class="k">ON</span> <span class="n">pastes</span> <span class="p">(</span><span class="n">shortlink</span><span class="p">)</span> <span class="k">USING</span> <span class="n">BTREE</span><span class="p">;;</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">created_at_idx</span> <span class="k">ON</span> <span class="n">pastes</span> <span class="p">(</span><span class="n">created_at</span><span class="p">)</span> <span class="k">USING</span> <span class="n">BTREE</span><span class="p">;;</span>
</pre></div>
</div>
<div class="section" id="unique-url-path-generation">
<h4><a class="toc-backref" href="#id46">Unique <span class="caps">URL</span> path&nbsp;generation</a></h4>
<ol class="arabic simple">
<li>Generate a random string md5(&#8220;user <span class="caps">IP</span> address string&#8221; + &#8220;timestamp&nbsp;string&#8221;)</li>
<li>Encode string from 1 with <cite>Base 62</cite> (like Base 64 but without escape&nbsp;characters)</li>
</ol>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">base_encode</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">62</span><span class="p">):</span>
    <span class="n">digits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span>
      <span class="n">remainder</span> <span class="o">=</span> <span class="n">modulo</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
      <span class="n">digits</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">remainder</span><span class="p">)</span>
      <span class="n">num</span> <span class="o">=</span> <span class="n">divide</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
    <span class="n">digits</span> <span class="o">=</span> <span class="n">digits</span><span class="o">.</span><span class="n">reverse</span>
</pre></div>
<ol class="arabic simple" start="3">
<li>Get first 7 characters from base62 string: it&#8217;s 62**7 possible
short paths (which is much more than we need in our 3 years plan,
i.e. 360 million&nbsp;URLs)</li>
</ol>
<div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">base_encode</span><span class="p">(</span><span class="n">md5</span><span class="p">(</span><span class="n">ip_address</span><span class="o">+</span><span class="n">timestamp</span><span class="p">))[:</span><span class="n">URL_LENGTH</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="request-write-api">
<h4><a class="toc-backref" href="#id47">Request Write <span class="caps">API</span></a></h4>
<div class="highlight"><pre><span></span>$ curl -X POST https://pastebin.com/api/v1.0/paste <span class="se">\</span>
       --data <span class="s1">&#39;{ &quot;expiration_in_minutes&quot;: &quot;60&quot;, &quot;paste_contents&quot;: &quot;My paste&quot; }&#39;</span>
</pre></div>
</div>
<div class="section" id="write-api-response">
<h4><a class="toc-backref" href="#id48">Write <span class="caps">API</span>&nbsp;Response</a></h4>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;shortlink&quot;</span><span class="o">:</span> <span class="s2">&quot;xJlsmeT&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="request-read-api">
<h4><a class="toc-backref" href="#id49">Request Read <span class="caps">API</span></a></h4>
<div class="highlight"><pre><span></span>$ curl https://pastebin.com/api/v1.0/paste?shortlink<span class="o">=</span>xJlsmeT
</pre></div>
</div>
<div class="section" id="read-api-reponse">
<h4><a class="toc-backref" href="#id50">Read <span class="caps">API</span>&nbsp;Reponse</a></h4>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;paste&quot;</span><span class="o">:</span> <span class="s2">&quot;My paste&quot;</span>
    <span class="s2">&quot;created_at&quot;</span><span class="o">:</span> <span class="s2">&quot;YYYY-MM-DD HH:MM:SS&quot;</span>
    <span class="s2">&quot;expiration_in_minutes&quot;</span><span class="o">:</span> <span class="s2">&quot;60&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="statistics">
<h4><a class="toc-backref" href="#id51">Statistics</a></h4>
<p>Since we don&#8217;t need realtime analytics, let&#8217;s use Nginx logs and process them in&nbsp;MapReduce</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HitCounts</span><span class="p">(</span><span class="n">MRJob</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">extract_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extract the generated url from the log line.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">extract_year_month</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the year and month portions of the timestamp.&quot;&quot;&quot;</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">mapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parse each log line, extract and transform relevant lines.</span>

<span class="sd">        Emit key value pairs of the form:</span>

<span class="sd">        (2016-01, url0), 1</span>
<span class="sd">        (2016-01, url0), 1</span>
<span class="sd">        (2016-01, url1), 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_url</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_year_month</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">period</span><span class="p">,</span> <span class="n">url</span><span class="p">),</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">reducer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sum values for each key.</span>

<span class="sd">        (2016-01, url0), 2</span>
<span class="sd">        (2016-01, url1), 1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield</span> <span class="n">key</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sources-and-useful-links">
<h2><a class="toc-backref" href="#id52">Sources and useful&nbsp;links</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://www.toptal.com/python/interview-questions">Toptal Python Interview&nbsp;Questions</a></li>
<li>Python Interview Questions (<a class="reference external" href="https://luminousmen.com/post/6">junior</a>, <a class="reference external" href="https://luminousmen.com/post/7">middle</a>, <a class="reference external" href="https://luminousmen.com/post/8">senior</a>)</li>
<li><a class="reference external" href="https://github.com/checkcheckzz/system-design-interview">System design&nbsp;interview</a></li>
<li><a class="reference external" href="https://docs.python.org/3.8/reference/index.html">The Python Language&nbsp;Reference</a></li>
<li><a class="reference external" href="http://www.postgresqltutorial.com/">PostgreSQL&nbsp;Tutorial</a></li>
</ul>
</div>

            </div><!-- /.entry-content -->
            <div class="comments">
              <h5>Comments</h5>
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                var disqus_shortname = 'https-blog-pilosus-org';
                var disqus_identifier = 'posts/2019/12/15/python-interview-questions/';
                var disqus_url = 'https://blog.pilosus.org/posts/2019/12/15/python-interview-questions/';
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//https-blog-pilosus-org.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
              <noscript>Please enable JavaScript to view the comments.</noscript>
            </div>

          </article>
        </section>
      </div>

      <div class="navbar-spacer"></div>
      <section class="extras">
        <ul class="navbar-list">
          <li class="navbar-item"><a class="navbar-link" href="https://pilosus.org/">Home Page</a></li>
          <li class="navbar-item"><a class="navbar-link" href="https://keybase.io/pilosus">Keybase</a></li>
          <li class="navbar-item"><a class="navbar-link" href="/sitemap.xml">Sitemap</a></li>
          <li class="navbar-item"><a class="navbar-link" href="https://notes.pilosus.org/">Blog in Russian</a></li>
        </ul>

        <ul class="navbar-list">
          <li class="navbar-item"><a class="navbar-link" href="https://blog.pilosus.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

          <li class="navbar-item"><a class="navbar-link" href="https://github.com/pilosus">GitHub</a></li>
          <li class="navbar-item"><a class="navbar-link" href="https://www.linkedin.com/in/vitaly-samigullin-05027233/">LinkedIn</a></li>
        </ul>
      </section><!-- /#extras -->

      <footer class="footer-pelican">
        <address id="about" class="vcard body">
          Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>. Theme: <a href="http://github.com/pilosus/pilosus-pelican-theme/">Pilosus Pelican</a>
        </address><!-- /#about -->
      </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-140765245-1', 'auto');
    ga('send', 'pageview');
    </script>
<script type="text/javascript">
    var disqus_shortname = 'https-blog-pilosus-org';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    </div>
  </body>
</html>